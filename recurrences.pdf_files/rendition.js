/*! For license information please see rendition.js.LICENSE.txt */
(()=>{var t,n,i={sR8A:t=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}t.exports=function(t){var n={};function r(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=n,r.d=function(t,n,i){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==_typeof(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(i,o,function(n){return t[n]}.bind(null,o));return i},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="/build/",r(r.s=1)}([function(t,n,i){var o;!function(s,c){"use strict";var u="model",l="name",d="type",f="vendor",p="version",h="mobile",v="tablet",_="smarttv",m={extend:function extend(t,n){var i={};for(var o in t)n[o]&&n[o].length%2==0?i[o]=n[o].concat(t[o]):i[o]=t[o];return i},has:function has(t,n){return"string"==typeof t&&-1!==n.toLowerCase().indexOf(t.toLowerCase())},lowerize:function lowerize(t){return t.toLowerCase()},major:function major(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function trim(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},g={rgx:function rgx(t,n){for(var i,o,s,c,u,l,d=0;d<n.length&&!u;){var f=n[d],p=n[d+1];for(i=o=0;i<f.length&&!u;)if(u=f[i++].exec(t))for(s=0;s<p.length;s++)l=u[++o],"object"==_typeof(c=p[s])&&c.length>0?2==c.length?"function"==typeof c[1]?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3==c.length?"function"!=typeof c[1]||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):void 0:this[c[0]]=l?c[1].call(this,l,c[2]):void 0:4==c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):void 0):this[c]=l||void 0;d+=2}},str:function str(t,n){for(var i in n)if("object"==_typeof(n[i])&&n[i].length>0){for(var o=0;o<n[i].length;o++)if(m.has(n[i][o],t))return"?"===i?void 0:i}else if(m.has(n[i],t))return"?"===i?void 0:i;return t}},y={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},b={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6}).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[l,p],[/(opios)[\/\s]+([\w\.]+)/i],[[l,"Opera Mini"],p],[/\s(opr)\/([\w\.]+)/i],[[l,"Opera"],p],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[l,p],[/(konqueror)\/([\w\.]+)/i],[[l,"Konqueror"],p],[/(trident).+rv[:\s]([\w\.]{1,9}).+like\sgecko/i],[[l,"IE"],p],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[l,"Edge"],p],[/(yabrowser)\/([\w\.]+)/i],[[l,"Yandex"],p],[/(Avast)\/([\w\.]+)/i],[[l,"Avast Secure Browser"],p],[/(AVG)\/([\w\.]+)/i],[[l,"AVG Secure Browser"],p],[/(puffin)\/([\w\.]+)/i],[[l,"Puffin"],p],[/(focus)\/([\w\.]+)/i],[[l,"Firefox Focus"],p],[/(opt)\/([\w\.]+)/i],[[l,"Opera Touch"],p],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[l,"UCBrowser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],p],[/(windowswechat qbcore)\/([\w\.]+)/i],[[l,"WeChat(Win) Desktop"],p],[/(micromessenger)\/([\w\.]+)/i],[[l,"WeChat"],p],[/(brave)\/([\w\.]+)/i],[[l,"Brave"],p],[/(whale)\/([\w\.]+)/i],[[l,"Whale"],p],[/(qqbrowserlite)\/([\w\.]+)/i],[l,p],[/(QQ)\/([\d\.]+)/i],[l,p],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[l,p],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[l,p],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[l,p],[/(MetaSr)[\/\s]?([\w\.]+)/i],[l],[/(LBBROWSER)/i],[l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[p,[l,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[l,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[l,p],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[l,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[l,/(.+)/,"$1 WebView"],p],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[l,/(.+(?:g|us))(.+)/,"$1 $2"],p],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[p,[l,"Android Browser"]],[/(coc_coc_browser)\/([\w\.]+)/i],[[l,"Coc Coc"],p],[/(sailfishbrowser)\/([\w\.]+)/i],[[l,"Sailfish Browser"],p],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[l,p],[/(dolfin)\/([\w\.]+)/i],[[l,"Dolphin"],p],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[l,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[l,"Chrome"],p],[/(coast)\/([\w\.]+)/i],[[l,"Opera Coast"],p],[/fxios\/([\w\.-]+)/i],[p,[l,"Firefox"]],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[p,l],[/webkit.+?(gsa)\/([\w\.]+)\s.*(mobile\s?safari|safari)(\/[\w\.]+)/i],[[l,"GSA"],p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[p,g.str,y.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],p],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",m.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",m.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",m.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[u,f,[d,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[u,[f,"Apple"],[d,v]],[/(apple\s{0,1}tv)/i],[[u,"Apple TV"],[f,"Apple"],[d,_]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[f,u,[d,v]],[/(kf[A-z]+)(\sbuild\/|\)).+silk\//i],[u,[f,"Amazon"],[d,v]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[u,g.str,y.device.amazon.model],[f,"Amazon"],[d,h]],[/android.+aft([\w])(\sbuild\/|\))/i],[u,[f,"Amazon"],[d,_]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[u,f,[d,h]],[/\((ip[honed|\s\w*]+);/i],[u,[f,"Apple"],[d,h]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[f,u,[d,h]],[/\(bb10;\s(\w+)/i],[u,[f,"BlackBerry"],[d,h]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[u,[f,"Asus"],[d,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[f,"Sony"],[u,"Xperia Tablet"],[d,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,"Sony"],[d,h]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[f,u,[d,"console"]],[/android.+;\s(shield)\sbuild/i],[u,[f,"Nvidia"],[d,"console"]],[/(playstation\s[34portablevi]+)/i],[u,[f,"Sony"],[d,"console"]],[/(sprint\s(\w+))/i],[[f,g.str,y.device.sprint.vendor],[u,g.str,y.device.sprint.model],[d,h]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[f,[u,/_/g," "],[d,h]],[/(nexus\s9)/i],[u,[f,"HTC"],[d,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/android.+\s(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?)/i],[u,[f,"Huawei"],[d,h]],[/android.+(bah2?-a?[lw]\d{2})/i],[u,[f,"Huawei"],[d,v]],[/(microsoft);\s(lumia[\s\w]+)/i],[f,u,[d,h]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[u,[f,"Microsoft"],[d,"console"]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,"Microsoft"],[d,h]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[u,[f,"Motorola"],[d,h]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[u,[f,"Motorola"],[d,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[f,m.trim],[u,m.trim],[d,_]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,"Samsung"],[d,_]],[/\(dtv[\);].+(aquos)/i],[u,[f,"Sharp"],[d,_]],[/android.+((sch-i[89]0\d|shw-m380s|SM-P605|SM-P610|SM-P587|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[f,"Samsung"],u,[d,v]],[/smart-tv.+(samsung)/i],[f,[d,_],u],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[f,"Samsung"],u,[d,h]],[/sie-(\w*)/i],[u,[f,"Siemens"],[d,h]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[f,"Nokia"],u,[d,h]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[u,[f,"Acer"],[d,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[u,[f,"LG"],[d,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[f,"LG"],u,[d,v]],[/linux;\snetcast.+smarttv/i,/lg\snetcast\.tv-201\d/i],[[f,"LG"],u,[d,_]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[u,[f,"LG"],[d,h]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[f,u,[d,v]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[u,[f,"Lenovo"],[d,v]],[/(lenovo)[_\s-]?([\w-]+)/i],[f,u,[d,h]],[/linux;.+((jolla));/i],[f,u,[d,h]],[/((pebble))app\/[\d\.]+\s/i],[f,u,[d,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[f,u,[d,h]],[/crkey/i],[[u,"Chromecast"],[f,"Google"],[d,_]],[/android.+;\s(glass)\s\d/i],[u,[f,"Google"],[d,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[u,[f,"Google"],[d,v]],[/android.+;\s(pixel( [2-9]a?)?( xl)?)[\s)]/i],[u,[f,"Google"],[d,h]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/android.+(redmi[\s\-_]?(?:note|k)?(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i,/android.+(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[u,/_/g," "],[f,"Xiaomi"],[d,h]],[/android.+(mi[\s\-_]?(?:pad)(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i],[[u,/_/g," "],[f,"Xiaomi"],[d,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[u,[f,"Meizu"],[d,h]],[/(mz)-([\w-]{2,})/i],[[f,"Meizu"],u,[d,h]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[u,[f,"OnePlus"],[d,h]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[u,[f,"RCA"],[d,v]],[/android.+[;\/\s](Venue[\d\s]{2,7})\s+build/i],[u,[f,"Dell"],[d,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[u,[f,"Verizon"],[d,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(\S(?:.*\S)?)\s+build/i],[[f,"Barnes & Noble"],u,[d,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[u,[f,"NuVision"],[d,v]],[/android.+;\s(k88)\sbuild/i],[u,[f,"ZTE"],[d,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[u,[f,"Swiss"],[d,h]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[u,[f,"Swiss"],[d,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[u,[f,"Zeki"],[d,v]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[f,"Dragon Touch"],u,[d,v]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[u,[f,"Insignia"],[d,v]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[u,[f,"NextBook"],[d,v]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[f,"Voice"],u,[d,h]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[f,"LvTel"],u,[d,h]],[/android.+;\s(PH-1)\s/i],[u,[f,"Essential"],[d,h]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[u,[f,"Envizen"],[d,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[f,u,[d,v]],[/android.+[;\/]\s*(Trio[\s\w\-\.]+)\s+build/i],[u,[f,"MachSpeed"],[d,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[f,u,[d,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[u,[f,"Rotor"],[d,v]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[f,u,[d,v]],[/android .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[u,[d,h]],[/android .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[u,[d,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[d,m.lowerize],f,u],[/[\s\/\(](smart-?tv)[;\)]/i],[[d,_]],[/(android[\w\.\s\-]{0,9});.+build/i],[u,[f,"Generic"]],[/(phone)/i],[[d,h]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,p],[/rv\:([\w\.]{1,9}).+(gecko)/i],[p,l]],os:[[/(xbox);\s+xbox\s([^\);]+)/i,/microsoft\s(windows)\s(vista|xp)/i],[l,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[p,g.str,y.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[p,g.str,y.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[l,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[l,"Symbian"],p],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],p],[/crkey\/([\d\.]+)/i],[p,[l,"Chromecast"]],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[l,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],p],[/(sunos)\s?([\w\.\d]*)/i],[[l,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[l,p],[/(haiku)\s(\w+)/i],[l,p],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[p,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[l,p]]},P=function w(t,n){if("object"==_typeof(t)&&(n=t,t=void 0),!(this instanceof w))return new w(t,n).getResult();var i=t||(s&&s.navigator&&s.navigator.userAgent?s.navigator.userAgent:""),o=n?m.extend(b,n):b;return this.getBrowser=function(){var t={name:void 0,version:void 0};return g.rgx.call(t,i,o.browser),t.major=m.major(t.version),t},this.getCPU=function(){var t={architecture:void 0};return g.rgx.call(t,i,o.cpu),t},this.getDevice=function(){var t={vendor:void 0,model:void 0,type:void 0};return g.rgx.call(t,i,o.device),t},this.getEngine=function(){var t={name:void 0,version:void 0};return g.rgx.call(t,i,o.engine),t},this.getOS=function(){var t={name:void 0,version:void 0};return g.rgx.call(t,i,o.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(t){return i=t,this},this};P.VERSION="0.7.24",P.BROWSER={NAME:l,MAJOR:"major",VERSION:p},P.CPU={ARCHITECTURE:"architecture"},P.DEVICE={MODEL:u,VENDOR:f,TYPE:d,CONSOLE:"console",MOBILE:h,SMARTTV:_,TABLET:v,WEARABLE:"wearable",EMBEDDED:"embedded"},P.ENGINE={NAME:l,VERSION:p},P.OS={NAME:l,VERSION:p},void 0!==n?(void 0!==t&&t.exports&&(n=t.exports=P),n.UAParser=P):void 0===(o=function(){return P}.call(n,i,n,t))||(t.exports=o);var k=s&&(s.jQuery||s.Zepto);if(k&&!k.ua){var A=new P;k.ua=A.getResult(),k.ua.get=function(){return A.getUA()},k.ua.set=function(t){A.setUA(t);var n=A.getResult();for(var i in n)k.ua[i]=n[i]}}}("object"==("undefined"==typeof window?"undefined":_typeof(window))?window:this)},function(t,n,i){"use strict";i.r(n),i.d(n,"AcrobatJS",(function(){return Qe})),i.d(n,"enums",(function(){return o})),i.d(n,"AcrobatJSSecurityHandler",(function(){return Ye}));var o={};function a(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i.r(o),i.d(o,"PageRequestType",(function(){return Se})),i.d(o,"AnnotType",(function(){return Re})),i.d(o,"Permissions",(function(){return Te})),i.d(o,"ContentType",(function(){return je})),i.d(o,"ColorPaletteKey",(function(){return De})),i.d(o,"FTPDFToWebViewTranslationStatus",(function(){return Ie})),i.d(o,"ProcessingMode",(function(){return Oe}));var s=Object.freeze(["unknown",'"Kozuka Gothic Pr6N R", "Meiryo", "Hira Kaku Pro N", "Hira Min Pro N", "Noto Sans JP"','"Adobe Heiti Std", "SimSun", "ST Heiti SC", "Adobe Song Std"','"DF Kai Shu", "ST Heiti TC", "Adobe Fan Heiti Std", "MingLiU", "Li Hei Pro", "Adobe Ming Std"','"Gulim", "Apple Gothic", "Adobe Gothic Std", "GulimChe", "Apple Myungjo", "Adobe Myungjo Std"']),c=new(function(){function e(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._textDataMap={},this._fontNameMap={},this._canvas=document.createElement("canvas")}var t,n;return t=e,(n=[{key:"_getFontWidth",value:function value(t){var n=this._canvas.getContext("2d");return n.font="10px ".concat(t),n.measureText("thequickbrownfoxjumpsovethelazydog").width}},{key:"_fontAvailable",value:function value(t){var n=this._getFontWidth("monospace"),i=this._getFontWidth("serif"),o=this._getFontWidth("sans-serif");return n!==this._getFontWidth('"'.concat(t,'",monospace'))||o!==this._getFontWidth('"'.concat(t,'",sans-serif'))||i!==this._getFontWidth('"'.concat(t,'",serif'))}},{key:"_getCSSFontFaceString",value:function value(t,n){if(void 0===this._fontNameMap[t.psName]){var i=t.bold?"bold ":"",o=t.italic?"italic ":"";this._fontNameMap[t.psName]="".concat(i+o,'10px "').concat(t.displayName?t.displayName:t.psName,'"'),this._textDataMap[t.psName]||(this._fontNameMap[t.psName]="".concat(i+o,"10px ").concat(s[t.language]))}return this._fontNameMap[t.psName].replace("10px","".concat(n,"px"))}},{key:"_prepareContextForFontMatrix",value:function value(t,n){var i=this._canvas.getContext("2d"),o=Math.ceil(1.65*n.size);this._canvas.setAttribute("height",o),this._canvas.setAttribute("width",o),i.font=this._getCSSFontFaceString(t,n.size);var s=-n.top,c=-n.left,u=1/n.size;return i.setTransform(n.a*u,n.b*u,-n.c*u,-n.d*u,c,s),i}},{key:"_getBitmapForCharCode",value:function value(t,n){t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this._canvas.width,this._canvas.height),t.restore(),t.fillText(String.fromCharCode(n),0,0);for(var i=t.getImageData(0,0,this._canvas.width,this._canvas.height),o={width:i.width,height:i.height,data:new Uint8ClampedArray(i.width*i.height)},s=0;s<i.width*i.height;s+=1)o.data[s]=i.data[4*s+3];return o}},{key:"_logData",value:function value(t){var n={},i="".concat(t.psName,"(").concat(t.displayName,")");return this._textDataMap[t.psName]?n[i]="ExactFont":t.allowFallback?n[i]="SystemDefault":n[i]="FauxFont",n}},{key:"generateGlyphBitmap",value:function value(t,n){var i=this,o={bitmaps:{}};if(!n)return o;var s=n.matrix;if(void 0===this._textDataMap[n.psName]){var c=this._fontAvailable(n.displayName?n.displayName:n.psName);this._textDataMap[n.psName]=c}if(o.analyticsData=this._logData(n),o[n.psName]=this._textDataMap[n.psName],!this._textDataMap[n.psName]&&!n.allowFallback)return o;var u=this._prepareContextForFontMatrix(n,s);return t.forEach((function(t){if(void 0===o.bitmaps[s.key+t]){var n=i._getBitmapForCharCode(u,t);o.bitmaps[s.key+t]=n}})),o}}])&&a(t.prototype,n),e}()),u=15,l=function F(t,n,i){var o=t;void 0!==n&&void 0!==o&&i.forEach((function(t){var i=n[t];void 0!==i&&(o[t]=i)}))},d=function E(t){return t&&"function"==typeof t},f=function O(t){var n;for(n=t.length-1;n>=0&&!(t[n]>0);n--);t.splice(n+1)},p=function j(t,n){var i=t.split(".").map((function(t){return parseInt(t,10)})),o=n.split(".").map((function(t){return parseInt(t,10)}));f(i),f(o);for(var s=Math.min(i.length,o.length),c=0;c<s;c+=1){if(i[c]>o[c])return 1;if(i[c]<o[c])return-1}return i.length===o.length?0:i.length<o.length?-1:1},h="registerLicense",v="openPDF",_="getPageRangeGeometry",m="getPageRendition",g="addMessagePort",y="getAnnots",b="hitTest",P="selectText",k="getAttachments",A="getBookmarks",S="getDataFromNamesTree",R="getAttachmentBuffer",T="getSelectedText",D="getHyperlinkData",I="findText",C="extractPageText",M="createAnnot",x="createFormField",L="updateFormField",N="updateFormFields",B="deleteFormField",W="getFormFields",U="editAnnot",G="deleteAnnot",q="getAnnotAppearance",z="getFASFieldAppearance",H="getDocumentXMPMetadata",J="getPageFontList",V="addFontForViewing",K="setLinearizedBlockSize",X="getFASFields",Q="createFASField",Y="deleteFASField",$="updateFASField",Z="lockFormFields",ee="flattenFASFields",te="createAnnots",re="deleteAnnots",ne="translateToLiquidModeView",ie="getHtmlLocationForDocPoint",oe="getDocPointForHtmlLocation",ae="JSApi",se="updateSignMetadata",ce="getSignMetadata",ue="createLinkAnnot",le="editLinkAnnot",de="deleteLinkAnnot",fe="getLinkAnnots",pe="addIcon",he="updateDocInfo",ve="detectSignFields",_e=!1,me=function Le(){var t;_e&&(t=console).log.apply(t,arguments)},ge=i(0),ye=i.n(ge),we=[[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[ye.a.BROWSER.VERSION,[ye.a.BROWSER.NAME,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[ye.a.BROWSER.VERSION,ye.a.BROWSER.NAME]],be=function ze(){return new ye.a({browser:we}).getBrowser()},Pe=function Ue(t){return"13.0",!(-1===p(t,"13.0")||function(t,n){return 1===p(t,"13.1")}(t))},ke=Object.freeze({INCORRECT_PASSWORD:3,LINEARIZATION_DICT_NOT_FOUND:4,INCOMPLETE_BUFFER_RANGES_DOWNLOADED:-1,SAB_INDEX_OUT_OF_BOUNDS:-2}),Ae=Object.freeze({INVALID_BUFFER:"Invalid buffer",INVALID_PAGE_NUM:"Invalid page number",SHARED_ARRAY_BUFFER_NOT_SUPPORTED:"Shared array buffer not supported",LINEARIZATION_DICT_NOT_FOUND:"Linearization dict not found",INCOMPLETE_BUFFER_RANGES_DOWNLOADED:"Incomplete pdf buffer ranges downloaded",SAB_INDEX_OUT_OF_BOUNDS:"Shared array buffer index is out of bounds",PASSWORD_PROTECTED_PDF_NOT_SUPPORTED_IN_LINEARIZED_WORKFLOW:"password protected pdf not supported in linearized workflow"}),Se=Object.freeze({PAGE:0,PAGE_CACHE:1,THUMBNAIL:2}),Re=Object.freeze({TEXT:1,LINK:2,FREE_TEXT:4,LINE:8,SQUARE:16,CIRCLE:32,POLYGON:64,POLYLINE:128,HIGHLIGHT:256,UNDERLINE:512,SQUIGGLY:1024,STRIKEOUT:2048,CARET:4096,STAMP:8192,INK:16384,POPUP:32768,FILE_ATTACHMENT:65536,SOUND:131072,MOVIE:262144,SCREEN:524288,WIDGET:1048576,WATERMARK:2097152,THREE_D:4194304,FREE_TEXT_TYPEWRITER:8388608,ALL:4294967295}),Te=Object.freeze({PRINT:4,MODIFY_CONTENT:8,COPY_EXTRACT_CONTENT:16,COMMENTING:32,FORM_FILLING:256,COPY_EXTRACT_CONTENT_ACCESSIBILITY:512,DOCUMENT_ASSEMBLY:1024,HIGH_QUALITY_PRINT:2048}),je=Object.freeze({NO_CONTENT:0,TEXT:1,HYPERLINK:2,INVALID:3,IMAGE:4}),De=Object.freeze({BACKGROUND:"background",TEXT:"text"}),Ie=Object.freeze({NOT_STARTED:-1,IN_PROGRESS:0,COMPLETE:1}),Oe=Object.freeze({BATCHED:"batched",DEFAULT:"default"});function et(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,o)}return i}function tt(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?et(Object(i),!0).forEach((function(n){rt(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):et(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}function rt(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function it(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ce=function(){function e(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._startTranslationCallback=t,this._html=null,this._htmlRequestQueue=[],this._isNewHTMLAvailable=!1,this._resources=new Map,this._pendingResourceRequests=new Map,this._translationStatus=Ie.NOT_STARTED,this._textDecoder=new TextDecoder}var t,n;return t=e,(n=[{key:"_isTranslationStarted",get:function get(){return this._translationStatus!==Ie.NOT_STARTED}},{key:"_isTranslationComplete",get:function get(){return this._translationStatus===Ie.COMPLETE}},{key:"_startTranslation",value:function value(t){this._startTranslationCallback(t),this._translationStatus=Ie.IN_PROGRESS}},{key:"_isHTMLRequestQueueEmpty",get:function get(){return 0===this._htmlRequestQueue.length}},{key:"_resolveHTMLRequest",value:function value(t){var n=t.requestStartTime;(0,t.resolveCallback)({data:{html:this._html},timeTaken:performance.now()-n}),this._isNewHTMLAvailable=!1}},{key:"_resolvePendingHTMLRequest",value:function value(){if(!this._isHTMLRequestQueueEmpty&&(this._isNewHTMLAvailable||this._isTranslationComplete)){var t=this._htmlRequestQueue.shift();this._resolveHTMLRequest(t)}}},{key:"_resolveAllPendingHTMLRequests",value:function value(){for(;!this._isHTMLRequestQueueEmpty;)this._resolvePendingHTMLRequest()}},{key:"_handleHTMLRequest",value:function value(){var t=this;return new Promise((function(n,i){var o=performance.now();t._htmlRequestQueue.push({requestStartTime:o,resolveCallback:n}),t._resolvePendingHTMLRequest()}))}},{key:"getHTMLStream",value:function value(t){var n=this;return this._isTranslationStarted||this._startTranslation(t),new Promise((function(i,o){var s=performance.now(),c=new ReadableStream({pull:function pull(t){var i=n._handleHTMLRequest();t.enqueue(i),n._isTranslationComplete&&(n._resolveAllPendingHTMLRequests(),t.close())}});i({command:t.command,data:{htmlStream:c},timeTaken:performance.now()-s})}))}},{key:"setHTML",value:function value(t,n){var i=this._textDecoder.decode(t.buffer);this._html=encodeURI(i),this._translationStatus=n,this._isNewHTMLAvailable=!0,this._resolvePendingHTMLRequest(),this._isTranslationComplete&&this._resolveAllPendingHTMLRequests()}},{key:"_resolveResourceRequest",value:function value(t){var n=t.command,i=t.resourceID,o=t.resourceURL,s=t.requestStartTime;(0,t.resolveCallback)({command:n,data:tt({resourceID:i,resourceURL:o},this._resources.get(o)),timeTaken:performance.now()-s})}},{key:"_resolvePendingResourceRequest",value:function value(t){if(this._pendingResourceRequests.has(t)&&this._resources.has(t)){var n=this._pendingResourceRequests.get(t);this._resolveResourceRequest(n),this._pendingResourceRequests.delete(t)}}},{key:"getResource",value:function value(t){var n=this,i=t.command,o=t.params,s=o.resourceID,c=o.resourceURL;return new Promise((function(t,o){var u=performance.now(),l={command:i,resourceID:s,resourceURL:c,requestStartTime:u,resolveCallback:t};n._pendingResourceRequests.set(c,l),n._resolvePendingResourceRequest(c)}))}},{key:"setResource",value:function value(t,n,i){this._resources.set(t,{resourceContent:n,resourceMimeType:i}),this._resolvePendingResourceRequest(t)}}])&&it(t.prototype,n),e}();function nt(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ee=function(){function e(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._beginRequestCallback=null,this._loadCallback=null,this._errorCallback=null}var t,n;return t=e,(n=[{key:"open",value:function value(t){this._beginRequestCallback=t}},{key:"onload",value:function value(t){this._loadCallback=t}},{key:"onerror",value:function value(t){this._errorCallback=t}},{key:"send",value:function value(t){var n=this;this._beginRequestCallback(t).then((function(t){if(n._loadCallback){var i={command:"applyCNFTPDFUpdates",priority:10,params:{cnftpdfUpdatesStream:t},transferList:[t]};n._loadCallback(i)}})).catch((function(t){n._errorCallback&&n._errorCallback(t)}))}}])&&nt(t.prototype,n),e}(),Fe=function st(t){try{return new URL(t).origin}catch(t){return}},Me=Object.freeze({ENABLE:0,DISABLE:1}),xe=(Object.freeze({READY_TO_WRITE_CHUNK:0,CHUNK_WRITTEN:1}),Object.freeze({MESSAGE_IN_PROGRESS:0,MESSAGE_WRITTEN:1}),Object.freeze({busyLoopStatus:0,doneStatus:1,readWriteStatus:2,lengthByteFirst:3,lengthByteSecond:4,responseStart:5})),Ne=function dt(t,n){t&&(new Uint8Array(t)[xe.busyLoopStatus]=n?Me.ENABLE:Me.DISABLE)};function ct(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],o=!0,s=!1,c=void 0;try{for(var u,l=t[Symbol.iterator]();!(o=(u=l.next()).done)&&(i.push(u.value),!n||i.length!==n);o=!0);}catch(t){s=!0,c=t}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}return i}}(t,n)||function(t,n){if(t){if("string"==typeof t)return ft(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ft(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=t[i];return o}function pt(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,o)}return i}function gt(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?pt(Object(i),!0).forEach((function(n){vt(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):pt(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}function vt(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function ht(t){return(ht="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return _typeof(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof(t)})(t)}function mt(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Be="".concat("ajs","PerfTimings"),We=function(){function e(t){var n=t.ajsPath,i=void 0===n?"":n,o=t.useFullBuild,s=void 0!==o&&o,c=t.enableLogging,u=void 0!==c&&c,l=t.workerCreator,d=t.signalDispatcher,f=t.windowObj;if(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),!window.Worker)throw new Error("Web Workers not supported!");Object.assign(this,{ajsPath:i,useFullBuild:s,enableLogging:u,signalDispatcher:d,workerCreator:l,windowObj:f}),this._messageMap={},this.pluginPortsMap=null,this._switchJSInfo={shouldSwitchBinary:!1,errorTypesLogged:[]},this._pdfBuffer=null,this._pdfPassword="",this._jsSAB=null,this._includeDocLevelActions=!1,this._workerReady=!1,this._messageCount=0,this.pluginModesEntered=new Map,this.activePluginMode="",this.activePluginModeStartTime=null,this._linearizationInfo={},this._ftpdfWebViewCache=new Ce(this.sendMessageToWorker.bind(this))}var t,n;return t=e,(n=[{key:"_getUpdatedMessageCount",value:function value(){return this._messageCount+=1,this._messageCount}},{key:"_initPromises",value:function value(){var t=this;this.workerLoaded=new Promise((function(n,i){t.workerLoadedResolve=n,t.workerLoadedReject=i}))}},{key:"_isWasmSupportedOnBrowser",value:function value(){var t=!0;return-1===navigator.userAgent.indexOf("OS 11_2")||-1===navigator.userAgent.indexOf("iPhone")&&-1===navigator.userAgent.indexOf("iPad")||(t=!1),self.WebAssembly&&"object"===ht(self.WebAssembly)||(t=!1),(function He(){return("safari"===(t=be().name.toLowerCase())||"mobile safari"===t)&&Pe(be().version);var t}()||function qe(){var t=new ye.a({browser:we}).getOS();return t&&"iOS"===t.name&&Pe(t.version)}())&&(t=!1),t}},{key:"_createWorker",value:function value(){var t,n,i,o;this.workerCreator&&"function"==typeof this.workerCreator&&(this.worker=this.workerCreator()),this.worker||(this.workerURL=(i=this.ajsPath,o=this.windowObj,i&&Fe(i)&&o.location.origin!==Fe(i)?(t=function(t){return"var Module = {};\n  Module.ajsRootUrl = '".concat(t,"';\n  Module.locateFile = function(resourcePath) { return Module.ajsRootUrl + resourcePath; };\n  importScripts(Module.ajsRootUrl + '").concat("acrobatProxy.js","');")}(this.ajsPath),n=new Blob([t],{type:"application/javascript"}),URL.createObjectURL(n)):"".concat(this.ajsPath,"acrobatProxy.js")),this.worker=new window.Worker(this.workerURL))}},{key:"init",value:function value(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((function(o,s){if(t._initResolve=o,t._initReject=s,!t._isWasmSupportedOnBrowser())return t._initReject({error:"WASM is not supported on this browser!"});t.signalDispatcher.trigger(Be,{ajsInit:performance.now()}),t._initPromises(),t._createWorker(),t.worker.onmessage=t._onWorkerMessage.bind(t),t.worker.onerror=t._onWorkerError.bind(t);var c=t._switchJSInfo.shouldSwitchBinary,u={command:"init",params:{useFullBuild:c||t.useFullBuild,enableLogging:t.enableLogging,totalMemory:n,t5Cache:Math.max(i,209715200)}};t._ajsBinaryStartTime=performance.now(),t.signalDispatcher.trigger("ajsBinaryLoadStarted",{startTime:t._ajsBinaryStartTime,isSwitchJs:c}),t.worker.postMessage(u)}))}},{key:"registerPDFBufferFetcher",value:function value(t){this.fetchPDFBufferRanges=t}},{key:"setPDFBuffer",value:function value(t){var n={command:"setPDFBuffer",params:{buffer:t}};this.signalDispatcher.trigger("completePDFBufferAvailable",{}),this._pdfBuffer=t,this.worker.postMessage(n)}},{key:"terminate",value:function value(){this._terminateWorker()}},{key:"_terminateWorker",value:function value(){this.worker.terminate()}},{key:"_shouldSwitchToFullBuild",value:function value(){return!1===this.useFullBuild&&!1===this._switchJSInfo.shouldSwitchBinary}},{key:"_restartWorker",value:function value(){return this._workerReady=!1,this._terminateWorker(),this.worker=void 0,this.init()}},{key:"loadFullWorker",value:function value(){return this._shouldSwitchToFullBuild()?this._switchToFullBuild(void 0,!1):Promise.resolve()}},{key:"getUpdatedPDF",value:function value(){var t={data:{buffer:this._pdfBuffer}};return Promise.resolve(t)}},{key:"_setAppearanceDataInCurrEventHelper",value:function value(t,n,i){var o=t;if(o&&o.params&&o.params.data){var s=t.params.data.annotIndex;if(void 0!==s&&s>=0&&s<n.length&&o.params.data.appearanceData){var c=n[s];o.params.data.appearanceData.buffer=c,i.push(c.buffer)}}}},{key:"_setAppearanceDataInCurrEvent",value:function value(t,n){var i=this,o=t,s=o.currEventAppearanceData;if(s.length>0){var c=o&&o.params&&o.params.data;o.params.data.commentData&&(c=o.params.data.commentData),c&&(Array.isArray(c)?c.forEach((function(t){i._setAppearanceDataInCurrEventHelper(t,s,n)})):this._setAppearanceDataInCurrEventHelper(o,s,n)),delete o.currEventAppearanceData}}},{key:"_sendMessageListToWorker",value:function value(t,n){var i,o=[],s=t&&t.data&&t.data.currEvent,c=n&&n.data&&n.data.msgList;if(s?(this._setAppearanceDataInCurrEvent(s,o),i={value:s,next:c,priority:1}):i=c,i){var u={command:"addMessages",params:{msgList:i},transferList:o};this._postToWorker(u)}}},{key:"_checkCommandInObject",value:function value(t,n){return t&&t.data&&t.data.currEvent&&t.data.currEvent.command===n}},{key:"_getOpenPdfMessage",value:function value(t){return t&&t.command===v?t:{command:v,priority:1,params:{buffer:this._pdfBuffer,password:this._pdfPassword,includeActions:this._includeDocLevelActions,jsSAB:this._jsSAB}}}},{key:"sendPluginPortsToWorker",value:function value(){var t=this;if(this.pluginPortsMap&&this.pluginPortsMap instanceof Map&&this.pluginPortsMap.size>0){var n=[];return this.pluginPortsMap.forEach((function(i,o){var s={command:g,params:{port:i,pluginName:o},transferList:[i]};n.push(t.sendMessageToWorker(s))})),Promise.all(n).then((function(){t.pluginPortsMap=null}))}return Promise.resolve()}},{key:"_cleanUpLinearizationWorkflow",value:function value(){this._linearizationInfo={},this.fetchPDFBufferRanges=null}},{key:"_isLinearizedWorkflow",value:function value(){return this._linearizationInfo.pdfSize}},{key:"_switchToFullBuild",value:function value(t){var n=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=t,s=this._switchJSInfo;return Ne(this._jsSAB,!1),new Promise((function(t,c){var u=[];n.pluginModesEntered.forEach((function(t,n){u.push(gt({name:n},t))}));var d={ajsError:{activePluginMode:n.activePluginMode,pluginModesEntered:u}};if(n.activePluginMode&&n.activePluginModeStartTime){var f=performance.now();d.ajsError.timeSpentInActivePluginMode=f-n.activePluginModeStartTime}if(o&&o.data){var p=o.data,_=p.currEvent,m=p.stackTrace,g=p.pdfUpdatesSoFar;_?(n._lastEventBeforeSwitch||(n._lastEventBeforeSwitch=_),d.ajsError.currEvent=_.command):n._lastMessage&&(d.ajsError.lastProcessedMessage=n._lastMessage),console.log(m),d.ajsError.stackTrace=m,d.ajsError.pdfUpdatesSoFar=g}if(o&&(l(d.ajsError,o,["errorCode","filename","lineno","colno"]),o.message&&(d.ajsError.errorMessage=o.message)),n._shouldSwitchToFullBuild()){s.shouldSwitchBinary=!0,d.ajsError.type=n._isLinearizedWorkflow()?"LinearizationSwitchJS":"FirstTimeSwitchJS",n._latestMemInfo&&(d.ajsError.memInfo=n._latestMemInfo);var y=n._pdfBuffer&&(n._pdfBuffer.length||n._pdfBuffer.byteLength)||0;n._linearizationInfo.pdfSize&&(y=n._linearizationInfo.pdfSize),n.sendMessageToWorker({command:"getMessages",params:{}}).then((function(i){var s=i;n._restartWorker(y).then((function(){if(n._checkCommandInObject(o,ae)&&delete o.data.currEvent,n._pdfBuffer||n._isLinearizedWorkflow())if(n._checkCommandInObject(o,v)){var i=n._getOpenPdfMessage(o.data.currEvent);delete o.data.currEvent,n.sendMessageToWorker(i),n._checkCommandInObject(s,v)&&delete s.data.currEvent,n._sendMessageListToWorker(o,s)}else if(n._isLinearizedWorkflow())n.fetchPDFBufferRanges([{start:0}]).then((function(i){var c=ct(i,1);n._pdfBuffer=c[0],n._cleanUpLinearizationWorkflow();var u=n._getOpenPdfMessage();n.sendMessageToWorker(u),n._sendMessageListToWorker(o,s),n.sendPluginPortsToWorker(),t()}));else{var c=n._getOpenPdfMessage();n.sendMessageToWorker(c),n._sendMessageListToWorker(o,s)}else n._checkCommandInObject(o,h)&&n._sendMessageListToWorker(o,s);s&&s.data&&(n.pluginPortsMap=s.data.pluginPortsMap),!0!==n._isLinearizedWorkflow()&&(n.sendPluginPortsToWorker(),t())})).catch(c)}))}else Ne(n._jsSAB,!0),n._lastEventBeforeSwitch&&n._lastEventBeforeSwitch.msgId&&(n._callMessageCallback(n._lastEventBeforeSwitch.msgId,{error:"corruptFile"}),n._lastEventBeforeSwitch=null),n._postToWorker({command:"setStateToNotSwitching",params:{}}),d.ajsError.type="SecondTimeSwitchJS";i&&!s.errorTypesLogged.includes(d.ajsError.type)&&(n.signalDispatcher.trigger("ajsError",d.ajsError),s.errorTypesLogged.push(d.ajsError.type))}))}},{key:"sendMessageToWorker",value:function value(t){var n=this;if(t.command===v&&t.params){var i=t.params,o=i.buffer,s=i.password,c=i.linearizationInfo,u=i.jsSAB,l=i.includeActions;c?(this._linearizationInfo=c,this._int32PartialPDFSAB=new Int32Array(this._linearizationInfo.partialPDFSAB)):(this._pdfBuffer=o,this.signalDispatcher.trigger("completePDFBufferAvailable",{})),this._pdfPassword=s,this._includeDocLevelActions=l,this._jsSAB=u}return new Promise((function(i,o){var s=t;s.msgId||(s.msgId=n._getUpdatedMessageCount(),n._messageMap[s.msgId]=function(t){t.error?o(t):i(t.data)}),n._postToWorker(s)}))}},{key:"sendMessageToWorkerSynchronously",value:function value(t){var n=this;return new Promise((function(i,o){var s=t;s.msgId||(s.msgId=n._getUpdatedMessageCount(),n._messageMap[s.msgId]=function(t){t.error?o(t):i(t.data)}),n._postToWorker(s)}))}},{key:"_postToWorker",value:function value(t){var n=t;me("message to worker",n);var i=n.transferList||[];delete n.transferList,this.worker.postMessage(n,i)}},{key:"_updatePluginInfo",value:function value(t){var n=this.activePluginMode;if(this.activePluginMode=t.activePluginMode,this.activePluginMode)this.activePluginModeStartTime=performance.now(),this.pluginModesEntered.has(this.activePluginMode)||this.pluginModesEntered.set(this.activePluginMode,{});else if(n&&this.activePluginModeStartTime){var i=performance.now();this.pluginModesEntered.set(n,{timeSpent:i-this.activePluginModeStartTime}),this.activePluginModeStartTime=null}}},{key:"_notifyBufferRanges",value:function value(t,n){if(t.length!==n.length)this._int32PartialPDFSAB[0]=ke.INCOMPLETE_BUFFER_RANGES_DOWNLOADED;else for(var i,o,s=n.length,c=0;c<n.length;c++){if(i=new Uint8Array(n[c]),this._int32PartialPDFSAB[c]=i.length,o=new Int32Array(i,0,i.length),this._int32PartialPDFSAB.length-s<o.length){this._int32PartialPDFSAB[0]=ke.SAB_INDEX_OUT_OF_BOUNDS;break}this._int32PartialPDFSAB.set(o,s),s+=o.length}Atomics.notify(this._int32PartialPDFSAB,0,1)}},{key:"createAdobeSenseiPredictRequest",value:function value(t){this.adobeSenseiPredictRequest=new Ee,this.adobeSenseiPredictRequest.open(t),this.adobeSenseiPredictRequest.onload(this.sendMessageToWorker.bind(this))}},{key:"getFTPDFWebViewHTMLStream",value:function value(t){return this._ftpdfWebViewCache.getHTMLStream(t)}},{key:"_setFTPDFWebViewHTML",value:function value(t,n){this._ftpdfWebViewCache.setHTML(t,n)}},{key:"getLiquidModeViewResource",value:function value(t){return this._ftpdfWebViewCache.getResource(t)}},{key:"_setFTPDFWebViewResource",value:function value(t,n,i){this._ftpdfWebViewCache.setResource(t,n,i)}},{key:"_onWorkerMessage",value:function value(t){var n=this,i=t.data,o=this._switchJSInfo.shouldSwitchBinary;if(me("message from worker",i),"proxyInitDone"===i.message)this.signalDispatcher.trigger(Be,{proxyInitTime:performance.now()});else if("initDone"===i.message||"init"===i.command){var s=i.importScriptTotalTime;this.signalDispatcher.trigger(Be,{importScriptTotalTime:s,ajsLoaded:performance.now()}),this._initResolve(),o||(this._workerReady=!0,this.workerLoadedResolve())}else if("wasmInitTime"===i.command){var u=performance.now();this.signalDispatcher.trigger("ajsBinaryTotalTime",{ajsBinaryTotalTime:u-this._ajsBinaryStartTime}),this.signalDispatcher.trigger(Be,{wasmLoadTime:i.time,wasmInitTime:u})}else if("generateGlyphsBitmap"===i.command){var l=i.resolveId,d=i.params,f=d.fontInfo,p=d.chars,h=c.generateGlyphBitmap(p,f),v=f.matrix;this.signalDispatcher.trigger("unembeddedFontsDetected",{chars:p,fontName:v.fontName});var _={command:"missingFontBitmaps",params:{missingTextData:h,resolveId:l}};this._postToWorker(_)}else if("updatePDFBuffer"===i.command)i.pdfBuffer&&(this._pdfBuffer=i.pdfBuffer);else if("fetchPDFBufferRanges"===i.command)if(this._pdfBuffer){me("fetchPDFBufferRanges: full pdf available");var m=i.ranges.map((function(t){return n._pdfBuffer.slice(t.start,Math.min(t.end+1,n._pdfBuffer.byteLength))}));this._notifyBufferRanges(i.ranges,m)}else this.fetchPDFBufferRanges(i.ranges).then((function(t){return n._notifyBufferRanges(i.ranges,t)}));else if("fetchCNFTPDFUpdates"===i.command)this.adobeSenseiPredictRequest.send(i);else if("setFTPDFWebViewHTML"===i.command){var g=i.html,y=i.translationStatus;this._setFTPDFWebViewHTML(g,y)}else if("setFTPDFWebViewResource"===i.command){var b=i.resourceURL,P=i.resourceContent,k=i.resourceMimeType;this._setFTPDFWebViewResource(b,P,k)}else if(i.lastProcessedMessage)this._lastMessage=i.lastProcessedMessage;else if(Object.prototype.hasOwnProperty.call(i,"activePluginMode")&&"string"==typeof i.activePluginMode)this._updatePluginInfo(i);else if("trackingEvent"===i.command)this.signalDispatcher.trigger(i.eventName,i.data);else{"openPDF"===i.command&&(this._pdfBuffer&&Ne(this._jsSAB,!0),o&&(this._workerReady=!0,this.workerLoadedResolve()));var A,S=i.msgId,R=i.error;"SWITCHJS"===R&&i&&i.data&&i.data.memInfo&&(this._latestMemInfo=i.data.memInfo),void 0!==S&&("SWITCHJS"===R?this._switchToFullBuild(i):(A=R?gt(gt({},i),{},{error:i.err_code||R}):t,this._callMessageCallback(S,A)))}}},{key:"_callMessageCallback",value:function value(t,n){var i=this._messageMap[t];d(i)&&i(n),delete this._messageMap[t]}},{key:"_onWorkerError",value:function value(t){this._switchToFullBuild(t)}}])&&mt(t.prototype,n),e}();function kt(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ge=function(){function e(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._reset()}var t,n;return t=e,(n=[{key:"_reset",value:function value(){this.commonListeners=[]}},{key:"subscribe",value:function value(t){this.commonListeners.includes(t)||this.commonListeners.push(t)}},{key:"unsubscribe",value:function value(t){this.commonListeners.includes(t)&&this.commonListeners.splice(this.commonListeners.indexOf(t),1)}},{key:"getAllListeners",value:function value(){return this.commonListeners}},{key:"trigger",value:function value(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this.commonListeners.forEach((function(t){return t.apply(void 0,n.concat(["ajs"]))}))}},{key:"removeAll",value:function value(){this._reset()}}])&&kt(t.prototype,n),e}(),Je={ZOOM_LEVEL_CHANGE:"zoomLevelChange",HC_THEME_CHANGE:"highContrastThemeChange"},Ve=(Object.freeze({invalid:0,openPDF:1,getPageRendition:2,getPageRangeGeometry:3,extractPageText:4,selectText:5,hitTest:6,getSelectedText:7,getBookmarks:8,getDataFromNamesTree:9,getAttachments:10,getAttachmentBuffer:11,getHyperlinkData:12,findText:13,getAnnotAppearance:14,createAnnot:15,editAnnot:16,deleteAnnot:17,getAnnots:18,registerLicense:19,getDocumentXMPMetadata:20,editWillBegin:21,editDidEnd:22,processAction:23,editOperationBegin:24,editOperationDone:25,getPageFontList:26,saveChangesToPDF:27,setLinearizedBlockSize:28,getFASFields:29,createFASField:30,deleteFASField:31,updateFASField:32,flattenFASFields:33,getFASFieldAppearance:34,createAnnots:35,deleteAnnots:36,translateToLiquidModeView:37,applyCNFTPDFUpdates:38,getHtmlLocationForDocPoint:39,getDocPointForHtmlLocation:40,JSApi:41,createFormField:42,updateFormField:43,deleteFormField:44,getFormFields:45,updateSignMetadata:46,getSignMetadata:47,lockFormFields:48,createLinkAnnot:49,getLinkAnnots:50,editLinkAnnot:51,deleteLinkAnnot:52,addIcon:53,updateDocInfo:54,updateFormFields:55,detectSignFields:56}),Object.freeze({kNoError:0,kZeroByteFile:1,kPDFDownloadingError:2,kIncorrectPassword:3,kLinearizationDictNotFound:4,kUnknownError:5}),Object.freeze({NO_CONTENT:0,TEXT:1,HYPERLINK:2,INVALID:3,IMAGE:4,PATH:5}),Object.freeze({kNoDirection:0,kForwardArrow:1,kBackwardArrow:2,kUpArrow:3,kDownArrow:4})),Ke=Object.freeze({kNoShortcut:0,kLineBegin:1,kLineEnd:2});function At(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=t[i];return o}function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return _typeof(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof(t)})(t)}function Et(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function Ot(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,o)}return i}function jt(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ot(Object(i),!0).forEach((function(n){Nt(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ot(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}function Nt(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function Dt(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Xe=function(){function e(t){var n=t.ajsPath,i=void 0===n?"":n,o=t.enableLogging,s=void 0!==o&&o,c=t.useFullBuild,u=void 0!==c&&c,l=t.workerCreator,d=t.windowObj,f=void 0===d?window:d;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,{ajsPath:i,useFullBuild:u,enableLogging:s,workerCreator:l,windowObj:f}),this._signalDispatcher=new Ge,this._pluginsMap=new Map,this.ajsWorkerInitPromise=null}var t,n;return t=e,(n=[{key:"_attachListenerToPlugin",value:function value(t,n){var i=this._getPlugin(n);i&&i.subscribe(t)}},{key:"_attachAllListenersToPlugin",value:function value(t){var n=this;this._signalDispatcher.getAllListeners().forEach((function(i){return n._attachListenerToPlugin(i,t)}))}},{key:"_attachListenerToAllPlugins",value:function value(t){var n=this;this._pluginsMap.forEach((function(i,o){return n._attachListenerToPlugin(t,o)}))}},{key:"_removeAllListenersFromPlugin",value:function value(t){var n=this._getPlugin(t);n&&this._signalDispatcher.getAllListeners().forEach(n.unsubscribe)}},{key:"_removeListenerFromAllPlugins",value:function value(t){this._pluginsMap.forEach((function(n){return n.unsubscribe(t)}))}},{key:"_checkPluginDoesNotExist",value:function value(t){var n=this,i=t.name;return new Promise((function(t,o){n._getPlugin(i)&&o(new Error("Plugin ".concat(i," already exists"))),t()}))}},{key:"_checkApisDontExist",value:function value(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(i,o){var s=n.filter((function(n){return t[n]}));s.length&&o(new Error("Following apis already exist: ".concat(s.join(",")))),i()}))}},{key:"_getPlugin",value:function value(t){return this._pluginsMap.has(t)?this._pluginsMap.get(t):null}},{key:"_sendCoreApisToPlugin",value:function value(t){var n=this._getPlugin(t);n&&n.setCoreApis(this._getExposedApis(n.requestedApiList))}},{key:"_getExposedApis",value:function value(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i={};return n.forEach((function(n){t[n]&&(i[n]=Promise.resolve(t[n].bind(t)))})),i}},{key:"_populateSupportedPluginApis",value:function value(t){var n=this,i=t.name,o=this._getPlugin(i);o.supportedApiList.forEach((function(t){n[t]=o[t].bind(o)}))}},{key:"_removeSupportedPluginApis",value:function value(t){var n=this,i=t.name,o=this._getPlugin(i);o&&o.supportedApiList.forEach((function(t){delete n[t]}))}},{key:"_createMessageChannel",value:function value(t,n){var i=new MessageChannel,o=i.port1,s=i.port2;return Promise.all([this._transferPortToPlugin(o,t),this._transferPortToT5(s,n)])}},{key:"_transferPortToPlugin",value:function value(t,n){var i={params:{port:t},transferList:[t]};return n.addMessagePort(i)}},{key:"_transferPortToT5",value:function value(t,n){var i={command:g,params:{port:t,pluginName:n},transferList:[t]};return this._ajsWorker.sendMessageToWorker(i)}},{key:"_removePluginPortFromT5",value:function value(t){var n={command:"removeMessagePort",params:{pluginName:t}};return this._ajsWorker.sendMessageToWorker(n)}},{key:"_createBatchOfMessagesAndSendToWorker",value:function value(t,n,i,o){var s=[],c=[];n.forEach((function(t,o){var u={command:i,params:jt(jt({},t),{},{shouldUpdatePDFBuffer:o===n.length-1})};if(s.push(u),t&&t.data&&t.data.appearanceData&&t.data.appearanceData.buffer){var l=t.data.appearanceData.buffer;c.push(l.buffer)}}));var u={command:t,priority:o,params:{data:s},processingMode:Oe.BATCHED,transferList:c};return this._ajsWorker.sendMessageToWorker(u)}},{key:"init",value:function value(){var t=this.ajsPath,n=this.useFullBuild,i=this.enableLogging,o=this.workerCreator,s=this.windowObj;return _e=i,this._ajsWorker=new We({ajsPath:t,useFullBuild:n,enableLogging:i,workerCreator:o,signalDispatcher:this._signalDispatcher,windowObj:s}),this.ajsWorkerInitPromise=this._ajsWorker.init(),this.ajsWorkerInitPromise}},{key:"registerPlugin",value:function value(t){var n=this,i=t.plugin,o=t.name,s=t.autoLoad;return this._checkPluginDoesNotExist(t).then((function(){return n._checkApisDontExist(i.supportedApiList)})).then((function(){if(n._pluginsMap.set(o,i),n._populateSupportedPluginApis(t),n._attachAllListenersToPlugin(o),n._sendCoreApisToPlugin(o),s)return n.loadPlugin(t)}))}},{key:"deregisterPlugin",value:function value(t){var n=this,i=t.name;return this.unloadPlugin(t).then((function(){n._removeSupportedPluginApis({name:i}),n._pluginsMap.delete(i),n._removeAllListenersFromPlugin(i)}))}},{key:"loadPlugin",value:function value(t){var n=this,i=t.name,o=this._getPlugin(i);if(o){var s=o.load();return o.isSeparateWorker?Promise.all([s,this.ajsWorkerInitPromise]).then((function(t){return n._createMessageChannel(o,i).then((function(){return t[0]}))})):s}return Promise.reject(new Error("Plugin ".concat(i," does not exist")))}},{key:"unloadPlugin",value:function value(t){var n=t.name,i=this._getPlugin(n);return i?(i.isSeparateWorker&&this._removePluginPortFromT5(n),i.unload()):Promise.resolve()}},{key:"getApiListByPlugin",value:function value(t){var n=this._getPlugin(t);return n?n.supportedApiList:[]}},{key:"terminate",value:function value(){this._ajsWorker.terminate(),this._signalDispatcher.removeAll()}},{key:"subscribe",value:function value(t){this._signalDispatcher.subscribe(t),this._attachListenerToAllPlugins(t)}},{key:"unsubscribe",value:function value(t){this._signalDispatcher.unsubscribe(t),this._removeListenerFromAllPlugins(t)}},{key:"registerLicense",value:function value(t){var n=t.token,i=t.domain,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c={command:h,priority:s,viewState:o,params:{token:n,domain:i}};return this._ajsWorker.sendMessageToWorker(c)}},{key:"openPDF",value:function value(t){var n=this,i=t.buffer,o=t.password,s=void 0===o?"":o,c=t.documentId,u=t.includeActions,l=void 0!==u&&u,f=t.jsSAB,p=void 0===f?null:f,h=t.securityHandler,_=void 0===h?null:h,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!this._isValidArrayBuffer(i))return Promise.reject({error:Ae.INVALID_BUFFER});this._signalDispatcher.trigger("openPDFCalled",{});var y={command:v,priority:g,viewState:m,params:{buffer:i,password:s,documentId:c,includeActions:l,jsSAB:p}};return this._ajsWorker.sendMessageToWorker(y).then((function(t){return t.data.errorCode===ke.INCORRECT_PASSWORD&&_&&d(_.fetchPassword)?_.fetchPassword().then((function(t){var o={buffer:i,password:t,documentId:c,includeActions:l,jsSAB:p,securityHandler:_};return n.openPDF(o,m,g)})):(n._prepareTransformationMatrices(t),Promise.resolve(t))})).catch((function(){}))}},{key:"setLinearizedBlockSize",value:function value(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o={command:K,priority:i,viewState:n,params:{blockSize:t}};return this._ajsWorker.sendMessageToWorker(o)}},{key:"openLinearizedPDF",value:function value(t){var n=this,i=t.buffer,o=t.password,s=void 0===o?"":o,c=t.fetchPDFBufferRanges,u=t.pdfSize,l=t.documentId,d=t.includeActions,f=void 0!==d&&d,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return void 0===self.SharedArrayBuffer?Promise.reject({error:Ae.SHARED_ARRAY_BUFFER_NOT_SUPPORTED}):c([{start:0,end:1024}]).then((function(t){var o=4*u+1024,d=t[0],_=new SharedArrayBuffer(o),m={command:v,priority:h,viewState:p,params:{buffer:i,password:s,linearizationInfo:{initialBuffer:d,pdfSize:u,partialPDFSAB:_},documentId:l,includeActions:f}};return n._ajsWorker.registerPDFBufferFetcher(c),n._ajsWorker.sendMessageToWorker(m)})).then((function(t){return t.data.errorCode===ke.INCORRECT_PASSWORD?Promise.reject({error:Ae.PASSWORD_PROTECTED_PDF_NOT_SUPPORTED_IN_LINEARIZED_WORKFLOW}):t.data.errorCode===ke.LINEARIZATION_DICT_NOT_FOUND?Promise.reject({error:Ae.LINEARIZATION_DICT_NOT_FOUND}):(n._prepareTransformationMatrices(t),c([{start:0}]).then((function(t){var i=t[0];i.byteLength>u?n._ajsWorker.loadFullWorker():n._ajsWorker.setPDFBuffer(i)})),t)}))}},{key:"loadFullWorker",value:function value(){return this._ajsWorker.loadFullWorker()}},{key:"getPageRangeGeometry",value:function value(t){var n=t.startPageNum,i=t.endPageNum,o=t.forceCacheless,s=void 0!==o&&o,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,l={command:_,priority:u,viewState:c,params:{startPageNum:n,endPageNum:i,forceCacheless:s}};return this._ajsWorker.sendMessageToWorker(l)}},{key:"_isValidRGBArr",value:function value(t){return t&&Array.isArray(t)&&3===t.length}},{key:"_validateColorPalette",value:function value(t){return!!t&&this._isValidRGBArr(t[De.BACKGROUND])&&this._isValidRGBArr(t[De.TEXT])}},{key:"getPageRendition",value:function value(t){var n=t.pageNum,i=t.zoomLevel,o=t.renderRect,s=void 0===o?void 0:o,c=t.devicePixelRatio,u=void 0===c?window.devicePixelRatio:c,l=t.requestType,d=void 0===l?void 0:l,f=t.showAnnots,p=void 0===f?Re.ALL:f,h=t.tileRect,v=void 0===h?void 0:h,_=t.timeLimit,g=void 0===_?void 0:_,y=t.hiddenOCGs,b=void 0===y?[]:y,P=t.colorPallete,k=void 0===P?void 0:P,A=t.includeActions,S=void 0!==A&&A,R=t.mimeType,T=void 0===R?void 0:R,D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(!n||n<0){var C={command:m,data:{status:"failed",error:Ae.INVALID_PAGE_NUM}};return Promise.resolve(C)}var M=new Uint32Array(1);M[0]=p;var x={command:m,priority:I,viewState:D,params:jt({zoomLevel:i,renderRect:s,devicePixelRatio:u,pageNum:n,showAnnots:M[0],tileRect:v,requestType:d,timeLimit:g,hiddenOCGs:b,includeActions:S,mimeType:T},this._validateColorPalette(k)&&{colorPallete:k})};return this._ajsWorker.sendMessageToWorker(x)}},{key:"hitTest",value:function value(t){var n=t.pageNum,i=t.x,o=t.y,s=t.shouldDetectWeblinks,c=void 0===s||s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,d={command:b,priority:l,viewState:u,params:{pageNum:n,x:i,y:o,shouldDetectWeblinks:c}};return this._ajsWorker.sendMessageToWorker(d)}},{key:"selectText",value:function value(t){var n=t.startPoint,i=t.endPoint,o=t.direction,s=t.snapToWords,c=t.jumpTo,u=void 0===c?Ke.kNoShortcut:c,l=t.force,d=void 0!==l&&l,f=t.getCaret,p=void 0!==f&&f,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,_={command:P,priority:v,viewState:h,params:{startPoint:n,endPoint:i,direction:o,snapToWords:s,jumpTo:u,force:d,getCaret:p}};return this._ajsWorker.sendMessageToWorker(_)}},{key:"getDocumentXMPMetadata",value:function value(t){Et(t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,o={command:H,priority:i,viewState:n,params:{}};return this._ajsWorker.sendMessageToWorker(o)}},{key:"getAttachments",value:function value(t){Et(t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,o={command:k,priority:i,viewState:n,params:{}};return this._ajsWorker.sendMessageToWorker(o)}},{key:"getBookmarks",value:function value(t){Et(t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,o={command:A,priority:i,viewState:n,params:{}};return this._ajsWorker.sendMessageToWorker(o)}},{key:"getDataFromNamesTree",value:function value(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,o={command:S,priority:i,viewState:n,params:t};return this._ajsWorker.sendMessageToWorker(o)}},{key:"getAttachmentBuffer",value:function value(t){var n=t.name,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,s={command:R,priority:o,viewState:i,params:{name:n}};return this._ajsWorker.sendMessageToWorker(s)}},{key:"getSelectedText",value:function value(t){Et(t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o={command:T,priority:i,viewState:n,params:{}};return this._ajsWorker.sendMessageToWorker(o)}},{key:"getHyperlinkData",value:function value(t){var n=t.pageNum,i=t.x,o=t.y,s=t.shouldDetectWeblinks,c=void 0===s||s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,d={command:D,priority:l,viewState:u,params:{x:i,y:o,pageNum:n,shouldDetectWeblinks:c}};return this._ajsWorker.sendMessageToWorker(d)}},{key:"findText",value:function value(t){var n=t.text,i=t.startPage,o=t.numPages,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:13,u={command:I,priority:c,viewState:s,params:{text:n,startPage:i,numPages:o}};return this._ajsWorker.sendMessageToWorker(u)}},{key:"extractPageText",value:function value(t){var n=t.pageNum,i=t.getWordRects,o=void 0!==i&&i,s=t.getTextAttributes,c=void 0!==s&&s,u=t.getAnnots,l=void 0!==u&&u,d=t.getFormFieldData,f=void 0!==d&&d,p=t.getCharRects,h=void 0!==p&&p,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,m={command:C,priority:_,viewState:v,params:{pageNum:n,getWordRects:o,getAnnots:l,getTextAttributes:c,getFormFieldData:f,getCharRects:h}};return this._ajsWorker.sendMessageToWorker(m)}},{key:"getAnnots",value:function value(t){var n=t.pageNum,i=t.annotsFilter,o=t.includeActions,s=void 0!==o&&o,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,d={command:y,priority:l,viewState:c,params:{pageNum:n,annotsFilter:i,includeActions:s}};return this._ajsWorker.sendMessageToWorker(d)}},{key:"createAnnot",value:function value(t){var n=t.data,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,s={command:M,priority:o,viewState:i,params:{data:n}};return this._ajsWorker.sendMessageToWorker(s)}},{key:"updateSignMetadata",value:function value(t){var n=t.data,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,s={command:se,priority:o,viewState:i,params:{data:n}};return this._ajsWorker.sendMessageToWorker(s)}},{key:"getSignMetadata",value:function value(t){Et(t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,o={command:ce,priority:i,viewState:n,params:{}};return this._ajsWorker.sendMessageToWorker(o)}},{key:"createFormField",value:function value(t){var n=t.data,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,s={command:x,priority:o,viewState:i,params:{data:n}};return this._ajsWorker.sendMessageToWorker(s)}},{key:"updateFormField",value:function value(t){var n=t.pageNum,i=t.id,o=t.data,s=t.authoringMode,c=void 0!==s&&s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,f={command:L,priority:d,viewState:l,params:{pageNum:n,id:i,data:o,authoringMode:c}};return this._ajsWorker.sendMessageToWorker(f)}},{key:"addIcon",value:function value(t){var n=t.iconName,i=t.newIconName,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s={command:pe,priority:o,params:{newIconName:i,iconName:n}};return this._ajsWorker.sendMessageToWorker(s)}},{key:"updateFormFields",value:function value(t){var n=t.fields,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return this._createBatchOfMessagesAndSendToWorker(N,n,L,i)}},{key:"deleteFormField",value:function value(t){var n=t.pageNum,i=t.id,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,c={command:B,priority:s,viewState:o,params:{pageNum:n,id:i}};return this._ajsWorker.sendMessageToWorker(c)}},{key:"getFormFields",value:function value(t){var n=t.pageNum,i=t.includeActions,o=void 0!==i&&i,s=t.includeSignData,c=void 0!==s&&s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,f={command:W,priority:d,viewState:l,params:{pageNum:n,includeActions:o,includeSignData:c}};return this._ajsWorker.sendMessageToWorker(f)}},{key:"lockFormFields",value:function value(t){Et(t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,o={command:Z,priority:i,viewState:n,params:{}};return this._ajsWorker.sendMessageToWorker(o)}},{key:"createAnnots",value:function value(t){var n=t.data,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,s={command:te,priority:o,viewState:i,params:{data:n}};return this._ajsWorker.sendMessageToWorker(s)}},{key:"editAnnot",value:function value(t){var n=t.pageNum,i=t.id,o=t.data,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,l={command:U,priority:c,viewState:s,params:{pageNum:n,id:i,data:o}};return this._ajsWorker.sendMessageToWorker(l)}},{key:"deleteAnnot",value:function value(t){var n=t.pageNum,i=t.id,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,c={command:G,priority:s,viewState:o,params:{pageNum:n,id:i}};return this._ajsWorker.sendMessageToWorker(c)}},{key:"deleteAnnots",value:function value(t){var n=t.data,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,s={command:re,priority:o,viewState:i,params:{data:n}};return this._ajsWorker.sendMessageToWorker(s)}},{key:"getAnnotAppearance",value:function value(t){var n=t.pageNum,i=t.id,o=t.zoomLevel,s=t.devicePixelRatio,c=t.appearanceSubDict,l=t.appearanceState,d=t.colorPallete,f=void 0===d?void 0:d,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,v={command:q,priority:h,viewState:p,params:jt({pageNum:n,id:i,zoomLevel:o,devicePixelRatio:s,appearanceSubDict:c,appearanceState:l},this._validateColorPalette(f)&&{colorPallete:f})};return this._ajsWorker.sendMessageToWorker(v)}},{key:"JSApi",value:function value(t){var n=t.params,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,o={command:ae,priority:i,params:n};return n.addResultToSAB?this._ajsWorker.sendMessageToWorkerSynchronously(o):this._ajsWorker.sendMessageToWorker(o)}},{key:"updateDocInfo",value:function value(t){var n=t.data,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,o={command:he,priority:i,params:{data:n}};return this._ajsWorker.sendMessageToWorker(o)}},{key:"getFASFieldAppearance",value:function value(t){var n=t.pageNum,i=t.id,o=t.zoomLevel,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,l={command:z,priority:c,viewState:s,params:{pageNum:n,id:i,zoomLevel:o}};return this._ajsWorker.sendMessageToWorker(l)}},{key:"getFASFields",value:function value(t){var n=t.pageNum,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,o={command:X,priority:i,params:{pageNum:n}};return this._ajsWorker.sendMessageToWorker(o)}},{key:"createFASField",value:function value(t){var n=t.pageNum,i=t.data,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,s={command:Q,priority:o,params:{pageNum:n,data:i}};return this._ajsWorker.sendMessageToWorker(s)}},{key:"deleteFASField",value:function value(t){var n=t.pageNum,i=t.id,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,s={command:Y,priority:o,params:{pageNum:n,id:i}};return this._ajsWorker.sendMessageToWorker(s)}},{key:"updateFASField",value:function value(t){var n=t.pageNum,i=t.id,o=t.data,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,c={command:$,priority:s,params:{pageNum:n,id:i,data:o}};return this._ajsWorker.sendMessageToWorker(c)}},{key:"flattenFASFields",value:function value(t){var n=t.forceFlatten,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,o={command:ee,priority:i,params:{forceFlatten:n}};return this._ajsWorker.sendMessageToWorker(o)}},{key:"detectSignFields",value:function value(t){var n=t.startPage,i=t.numPages,o=t.detectAll,s=void 0===o||o,c=t.enableLogging,u=void 0!==c&&c,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,f={command:ve,priority:d,viewState:l,params:{startPage:n,numPages:i,detectAll:s,enableLogging:u}};return this._ajsWorker.sendMessageToWorker(f)}},{key:"getUpdatedBuffer",value:function value(){var t=this,n=performance.now();return Promise.all(Array.from(this._pluginsMap.values()).map((function(t){return t.doPreSaveOperations?t.doPreSaveOperations():Promise.resolve({saveRequired:!1})}))).then((function(i){var o=performance.now();if(window.TIME_TAKEN_IN_PRE_SAVE_OPS=o-n,-1!==i.findIndex((function(t){return!0===t.saveRequired}))){var s={command:"saveChangesToPDF",priority:20,params:{}};return t._ajsWorker.sendMessageToWorker(s).then((function(){var i=performance.now();return window.TOTAL_TIME_TAKEN_IN_SAVE=i-n,t._ajsWorker.getUpdatedPDF()}))}return t._ajsWorker.getUpdatedPDF()}))}},{key:"getPageFontList",value:function value(t){var n=t.pageNum,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,s={command:J,priority:o,viewState:i,params:{pageNum:n}};return this._ajsWorker.sendMessageToWorker(s)}},{key:"addFontForViewing",value:function value(t){var n=t.name,i=t.type,o=t.buffer,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,u=ArrayBuffer.isView(o)?o.buffer:o;if(!this._isValidArrayBuffer(u))return Promise.reject({error:Ae.INVALID_BUFFER});var l={command:V,viewState:s,priority:c,params:{name:n,type:i,buffer:u},transferList:[u]};return this._ajsWorker.sendMessageToWorker(l)}},{key:"translateToLiquidModeView",value:function value(t){var n=t.fetchCNFTPDFUpdatesCallback,i=t.convertType1Fonts,o=void 0===i||i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,u={command:ne,priority:c,viewState:s,params:{convertType1Fonts:o}};return this._ajsWorker.createAdobeSenseiPredictRequest(n),this._ajsWorker.getFTPDFWebViewHTMLStream(u)}},{key:"getLiquidModeViewResource",value:function value(t){var n={command:"getLiquidModeViewResource",params:{resourceID:t.resourceID,resourceURL:t.resourceURL}};return this._ajsWorker.getLiquidModeViewResource(n)}},{key:"getHtmlLocationForDocPoint",value:function value(t){var n=t.page,i=t.x,o=t.y,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:13,u={command:ie,priority:c,viewState:s,params:{page:n,x:i,y:o}};return this._ajsWorker.sendMessageToWorker(u)}},{key:"getDocPointForHtmlLocation",value:function value(t){var n=t.elementID,i=t.offset,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:13,c={command:oe,priority:s,viewState:o,params:{elementID:n,offset:i}};return this._ajsWorker.sendMessageToWorker(c)}},{key:"convertToViewSpace",value:function value(t){var n=t.pageNum,i=t.x,o=t.y,s=t.scale,c=void 0===s?1:s;if(this._pageMatrices&&0!==this._pageMatrices.length){var u=this._pageMatrices[n-1]?this._pageMatrices[n-1]:this._pageMatrices[0],l=u.a*i+u.c*o+u.e,d=u.b*i+u.d*o+u.f;return{x:l=Math.round(l*c),y:d=Math.round(d*c)}}}},{key:"convertToPDFSpace",value:function value(t){var n=t.pageNum,i=t.x,o=t.y,s=t.scale,c=void 0===s?1:s;if(this._pageMatrices&&0!==this._pageMatrices.length){var u=this._pageMatrices[n-1]?this._pageMatrices[n-1]:this._pageMatrices[0],l=i/c,d=o/c,f=u.a*u.d-u.b*u.c;return{x:(u.d*l-u.c*d+u.c*u.f-u.d*u.e)/f,y:(u.a*d-u.b*l+u.b*u.e-u.a*u.f)/f}}}},{key:"clearMessageQueue",value:function value(t){var n=t.evtName,i=function Ft(t,n){if(null==t)return{};var i,o,s=function(t,n){if(null==t)return{};var i,o,s={},c=Object.keys(t);for(o=0;o<c.length;o++)i=c[o],n.indexOf(i)>=0||(s[i]=t[i]);return s}(t,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(o=0;o<c.length;o++)i=c[o],n.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}(t,["evtName"]);if(!Object.values(Je).includes(n))return Promise.reject();var o={command:"clearMessageQueue",params:jt({evtName:n},i)};return this._ajsWorker.sendMessageToWorker(o)}},{key:"createLinkAnnot",value:function value(t){var n=t.pageNum,i=t.data,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,c={command:ue,priority:s,viewState:o,params:{pageNum:n,data:i}};return this._ajsWorker.sendMessageToWorker(c)}},{key:"editLinkAnnot",value:function value(t){var n=t.pageNum,i=t.id,o=t.data,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,l={command:le,priority:c,viewState:s,params:{pageNum:n,id:i,data:o}};return this._ajsWorker.sendMessageToWorker(l)}},{key:"deleteLinkAnnot",value:function value(t){var n=t.pageNum,i=t.id,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,c={command:de,priority:s,viewState:o,params:{pageNum:n,id:i}};return this._ajsWorker.sendMessageToWorker(c)}},{key:"_isValidArrayBuffer",value:function value(t){return t&&"object"===Mt(t)&&t instanceof ArrayBuffer}},{key:"getLinkAnnots",value:function value(t){var n=t.pageNum,i=t.includeActions,o=void 0===i||i,s=t.includeSignData,c=void 0!==s&&s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,f={command:fe,priority:d,viewState:l,params:{pageNum:n,includeActions:o,includeSignData:c}};return this._ajsWorker.sendMessageToWorker(f)}},{key:"_prepareTransformationMatrices",value:function value(t){var n=this;t.data&&t.data.pages&&(this._pageMatrices=[],t.data.pages.forEach((function(t){var i,o=function St(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],o=!0,s=!1,c=void 0;try{for(var u,l=t[Symbol.iterator]();!(o=(u=l.next()).done)&&(i.push(u.value),!n||i.length!==n);o=!0);}catch(t){s=!0,c=t}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}return i}}(t,n)||function(t,n){if(t){if("string"==typeof t)return At(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?At(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.boxes.cropBox,4),s=o[0],c=o[1],u=o[2],l=o[3];switch(t.rotation){case 270:i={a:0,b:-1,c:-1,d:0,e:l,f:u};break;case 180:i={a:-1,b:0,c:0,d:1,e:u,f:-c};break;case 90:i={a:0,b:1,c:1,d:0,e:-c,f:-s};break;default:i={a:1,b:0,c:0,d:-1,e:-s,f:l}}n._pageMatrices.push(i)})))}}])&&Dt(t.prototype,n),e}();Object.defineProperty(Xe,"PageRequestType",{value:Se,writable:!1}),Object.defineProperty(Xe,"AnnotType",{value:Re,writable:!1}),Object.defineProperty(Xe,"Permissions",{value:Te,writable:!1}),Object.defineProperty(Xe,"ContentType",{value:je,writable:!1}),Object.defineProperty(Xe,"KeyboardNavigationDirection",{value:Ve,writable:!1}),Object.defineProperty(Xe,"KeyboardNavigationShortcut",{value:Ke,writable:!1});var Qe=Xe;function Rt(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ye=function(){function e(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"fetchPassword",value:function value(){throw Error("method not overriden")}}])&&Rt(t.prototype,n),e}()}])},uY7Q:(t,n,i)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}t=i.nmd(t);var o="__lodash_hash_undefined__",s=9007199254740991,c="[object Arguments]",u="[object Function]",l="[object Object]",d=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p[c]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p[u]=p["[object Map]"]=p["[object Number]"]=p[l]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object WeakMap]"]=!1;var h="object"==(void 0===i.g?"undefined":_typeof(i.g))&&i.g&&i.g.Object===Object&&i.g,v="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,_=h||v||Function("return this")(),m="object"==_typeof(n)&&n&&!n.nodeType&&n,g=m&&"object"==_typeof(t)&&t&&!t.nodeType&&t,y=g&&g.exports===m,b=y&&h.process,P=function(){try{var t=g&&g.require&&g.require("util").types;return t||b&&b.binding&&b.binding("util")}catch(t){}}(),k=P&&P.isTypedArray;function apply(t,n,i){switch(i.length){case 0:return t.call(n);case 1:return t.call(n,i[0]);case 2:return t.call(n,i[0],i[1]);case 3:return t.call(n,i[0],i[1],i[2])}return t.apply(n,i)}var A,S=Array.prototype,R=Function.prototype,T=Object.prototype,D=_["__core-js_shared__"],I=R.toString,C=T.hasOwnProperty,M=(A=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",x=T.toString,L=I.call(Object),N=RegExp("^"+I.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=y?_.Buffer:void 0,W=_.Symbol,U=_.Uint8Array,G=B?B.allocUnsafe:void 0,q=function overArg(t,n){return function(i){return t(n(i))}}(Object.getPrototypeOf,Object),z=Object.create,H=T.propertyIsEnumerable,J=S.splice,V=W?W.toStringTag:void 0,K=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),X=B?B.isBuffer:void 0,Q=Math.max,Y=Date.now,$=getNative(_,"Map"),Z=getNative(Object,"create"),ee=function(){function object(){}return function(t){if(!isObject(t))return{};if(z)return z(t);object.prototype=t;var n=new object;return object.prototype=void 0,n}}();function Hash(t){var n=-1,i=null==t?0:t.length;for(this.clear();++n<i;){var o=t[n];this.set(o[0],o[1])}}function ListCache(t){var n=-1,i=null==t?0:t.length;for(this.clear();++n<i;){var o=t[n];this.set(o[0],o[1])}}function MapCache(t){var n=-1,i=null==t?0:t.length;for(this.clear();++n<i;){var o=t[n];this.set(o[0],o[1])}}function Stack(t){var n=this.__data__=new ListCache(t);this.size=n.size}function arrayLikeKeys(t,n){var i=ie(t),o=!i&&ne(t),s=!i&&!o&&oe(t),c=!i&&!o&&!s&&ae(t),u=i||o||s||c,l=u?function baseTimes(t,n){for(var i=-1,o=Array(t);++i<t;)o[i]=n(i);return o}(t.length,String):[],d=l.length;for(var f in t)!n&&!C.call(t,f)||u&&("length"==f||s&&("offset"==f||"parent"==f)||c&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||isIndex(f,d))||l.push(f);return l}function assignMergeValue(t,n,i){(void 0!==i&&!eq(t[n],i)||void 0===i&&!(n in t))&&baseAssignValue(t,n,i)}function assignValue(t,n,i){var o=t[n];C.call(t,n)&&eq(o,i)&&(void 0!==i||n in t)||baseAssignValue(t,n,i)}function assocIndexOf(t,n){for(var i=t.length;i--;)if(eq(t[i][0],n))return i;return-1}function baseAssignValue(t,n,i){"__proto__"==n&&K?K(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}Hash.prototype.clear=function hashClear(){this.__data__=Z?Z(null):{},this.size=0},Hash.prototype.delete=function hashDelete(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},Hash.prototype.get=function hashGet(t){var n=this.__data__;if(Z){var i=n[t];return i===o?void 0:i}return C.call(n,t)?n[t]:void 0},Hash.prototype.has=function hashHas(t){var n=this.__data__;return Z?void 0!==n[t]:C.call(n,t)},Hash.prototype.set=function hashSet(t,n){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Z&&void 0===n?o:n,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(t){var n=this.__data__,i=assocIndexOf(n,t);return!(i<0)&&(i==n.length-1?n.pop():J.call(n,i,1),--this.size,!0)},ListCache.prototype.get=function listCacheGet(t){var n=this.__data__,i=assocIndexOf(n,t);return i<0?void 0:n[i][1]},ListCache.prototype.has=function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1},ListCache.prototype.set=function listCacheSet(t,n){var i=this.__data__,o=assocIndexOf(i,t);return o<0?(++this.size,i.push([t,n])):i[o][1]=n,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new($||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(t){var n=getMapData(this,t).delete(t);return this.size-=n?1:0,n},MapCache.prototype.get=function mapCacheGet(t){return getMapData(this,t).get(t)},MapCache.prototype.has=function mapCacheHas(t){return getMapData(this,t).has(t)},MapCache.prototype.set=function mapCacheSet(t,n){var i=getMapData(this,t),o=i.size;return i.set(t,n),this.size+=i.size==o?0:1,this},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(t){var n=this.__data__,i=n.delete(t);return this.size=n.size,i},Stack.prototype.get=function stackGet(t){return this.__data__.get(t)},Stack.prototype.has=function stackHas(t){return this.__data__.has(t)},Stack.prototype.set=function stackSet(t,n){var i=this.__data__;if(i instanceof ListCache){var o=i.__data__;if(!$||o.length<199)return o.push([t,n]),this.size=++i.size,this;i=this.__data__=new MapCache(o)}return i.set(t,n),this.size=i.size,this};var te=function createBaseFor(t){return function(n,i,o){for(var s=-1,c=Object(n),u=o(n),l=u.length;l--;){var d=u[t?l:++s];if(!1===i(c[d],d,c))break}return n}}();function baseGetTag(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":V&&V in Object(t)?function getRawTag(t){var n=C.call(t,V),i=t[V];try{t[V]=void 0;var o=!0}catch(t){}var s=x.call(t);o&&(n?t[V]=i:delete t[V]);return s}(t):function objectToString(t){return x.call(t)}(t)}function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==c}function baseIsNative(t){return!(!isObject(t)||function isMasked(t){return!!M&&M in t}(t))&&(isFunction(t)?N:d).test(function toSource(t){if(null!=t){try{return I.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function baseKeysIn(t){if(!isObject(t))return function nativeKeysIn(t){var n=[];if(null!=t)for(var i in Object(t))n.push(i);return n}(t);var n=isPrototype(t),i=[];for(var o in t)("constructor"!=o||!n&&C.call(t,o))&&i.push(o);return i}function baseMerge(t,n,i,o,s){t!==n&&te(n,(function(c,u){if(s||(s=new Stack),isObject(c))!function baseMergeDeep(t,n,i,o,s,c,u){var d=safeGet(t,i),f=safeGet(n,i),p=u.get(f);if(p)return void assignMergeValue(t,i,p);var h=c?c(d,f,i+"",t,n,u):void 0,v=void 0===h;if(v){var _=ie(f),m=!_&&oe(f),g=!_&&!m&&ae(f);h=f,_||m||g?ie(d)?h=d:!function isArrayLikeObject(t){return isObjectLike(t)&&isArrayLike(t)}(d)?m?(v=!1,h=function cloneBuffer(t,n){if(n)return t.slice();var i=t.length,o=G?G(i):new t.constructor(i);return t.copy(o),o}(f,!0)):g?(v=!1,h=function cloneTypedArray(t,n){var i=n?function cloneArrayBuffer(t){var n=new t.constructor(t.byteLength);return new U(n).set(new U(t)),n}(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}(f,!0)):h=[]:h=function copyArray(t,n){var i=-1,o=t.length;n||(n=Array(o));for(;++i<o;)n[i]=t[i];return n}(d):function isPlainObject(t){if(!isObjectLike(t)||baseGetTag(t)!=l)return!1;var n=q(t);if(null===n)return!0;var i=C.call(n,"constructor")&&n.constructor;return"function"==typeof i&&i instanceof i&&I.call(i)==L}(f)||ne(f)?(h=d,ne(d)?h=function toPlainObject(t){return function copyObject(t,n,i,o){var s=!i;i||(i={});var c=-1,u=n.length;for(;++c<u;){var l=n[c],d=o?o(i[l],t[l],l,i,t):void 0;void 0===d&&(d=t[l]),s?baseAssignValue(i,l,d):assignValue(i,l,d)}return i}(t,keysIn(t))}(d):isObject(d)&&!isFunction(d)||(h=function initCloneObject(t){return"function"!=typeof t.constructor||isPrototype(t)?{}:ee(q(t))}(f))):v=!1}v&&(u.set(f,h),s(h,f,o,c,u),u.delete(f));assignMergeValue(t,i,h)}(t,n,u,i,baseMerge,o,s);else{var d=o?o(safeGet(t,u),c,u+"",t,n,s):void 0;void 0===d&&(d=c),assignMergeValue(t,u,d)}}),keysIn)}function baseRest(t,n){return re(function overRest(t,n,i){return n=Q(void 0===n?t.length-1:n,0),function(){for(var o=arguments,s=-1,c=Q(o.length-n,0),u=Array(c);++s<c;)u[s]=o[n+s];s=-1;for(var l=Array(n+1);++s<n;)l[s]=o[s];return l[n]=i(u),apply(t,this,l)}}(t,n,identity),t+"")}function getMapData(t,n){var i=t.__data__;return function isKeyable(t){var n=_typeof(t);return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?i["string"==typeof n?"string":"hash"]:i.map}function getNative(t,n){var i=function getValue(t,n){return null==t?void 0:t[n]}(t,n);return baseIsNative(i)?i:void 0}function isIndex(t,n){var i=_typeof(t);return!!(n=null==n?s:n)&&("number"==i||"symbol"!=i&&f.test(t))&&t>-1&&t%1==0&&t<n}function isPrototype(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||T)}function safeGet(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]}var re=function shortOut(t){var n=0,i=0;return function(){var o=Y(),s=16-(o-i);if(i=o,s>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}(K?function(t,n){return K(t,"toString",{configurable:!0,enumerable:!1,value:(i=n,function(){return i}),writable:!0});var i}:identity);function eq(t,n){return t===n||t!=t&&n!=n}var ne=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&C.call(t,"callee")&&!H.call(t,"callee")},ie=Array.isArray;function isArrayLike(t){return null!=t&&isLength(t.length)&&!isFunction(t)}var oe=X||function stubFalse(){return!1};function isFunction(t){if(!isObject(t))return!1;var n=baseGetTag(t);return n==u||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function isObject(t){var n=_typeof(t);return null!=t&&("object"==n||"function"==n)}function isObjectLike(t){return null!=t&&"object"==_typeof(t)}var ae=k?function baseUnary(t){return function(n){return t(n)}}(k):function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!p[baseGetTag(t)]};function keysIn(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}var se=function createAssigner(t){return baseRest((function(n,i){var o=-1,s=i.length,c=s>1?i[s-1]:void 0,u=s>2?i[2]:void 0;for(c=t.length>3&&"function"==typeof c?(s--,c):void 0,u&&function isIterateeCall(t,n,i){if(!isObject(i))return!1;var o=_typeof(n);if("number"==o?isArrayLike(i)&&isIndex(n,i.length):"string"==o&&n in i)return eq(i[n],t);return!1}(i[0],i[1],u)&&(c=s<3?void 0:c,s=1),n=Object(n);++o<s;){var l=i[o];l&&t(n,l,o,c)}return n}))}((function(t,n,i){baseMerge(t,n,i)}));function identity(t){return t}t.exports=se},ibkQ:(t,n,i)=>{"use strict";function ownKeys(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,o)}return i}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(i),!0).forEach((function(n){_defineProperty(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}function _defineProperty(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}i.d(n,{E:()=>setDocumentId,K:()=>c});var o=i("plsW").logging.getLogger("dc-rendition-provider"),s="";function setDocumentId(t){s=t}var c=function logEvent(t,n){o.emit(t,_objectSpread(_objectSpread({},n),{},{documentId:s,sessionId:window.dcWebSessionId}))}},RbXz:(t,n,i)=>{"use strict";i.d(n,{ZQ:()=>c,ir:()=>s,lO:()=>u});var o=i("zSZc");function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,n)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=t[i];return o}var s=function getOriginFromUrl(t){var n=document.createElement("a");return n.href=t,"".concat(n.protocol,"//").concat(n.hostname).concat(n.port?":".concat(n.port):"")},c=function getScriptSrc(t){var n;return _toConsumableArray(document.scripts).forEach((function(i){var o=i.src;return-1===o.indexOf(t)||(n=o,!1)})),n},u=function getAjsPath(){var t=c(o.X);return t?"".concat(t.replace(o.X,""),"AJS/"):""}},zSZc:(t,n,i)=>{"use strict";i.d(n,{X:()=>o});var o="rendition.js"},GNuk:(t,n,i)=>{"use strict";i.d(n,{v:()=>o});var o=function getQueryParams(t){var n,i,o={},s=(t||window.location.search).substr(1).split("&");if(""!==s)for(n=0;n<s.length;n+=1)2===(i=s[n].split("=")).length&&(o[i[0]]=decodeURIComponent(i[1].replace(/\+/g," ")));return o}},"6mnL":(t,n,i)=>{"use strict";i.d(n,{Z:()=>s});var o=i("sR8A");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,n){return t.__proto__=n,t},_setPrototypeOf(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(n){var s=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,s)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var s=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&_setPrototypeOf(t,n)}(SecurityHandler,t);var n=_createSuper(SecurityHandler);function SecurityHandler(t){var i;return function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,SecurityHandler),i=n.call(this),t.fetchPasswordCallback&&(i.fetchPassword=t.fetchPasswordCallback),i}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(SecurityHandler)}(o.AcrobatJSSecurityHandler)},"6rni":(t,n,i)=>{t.exports=i("2pFd")("DlMc")},sdTo:(t,n,i)=>{t.exports=i("2pFd")("WOwn")},"4PKp":(t,n,i)=>{t.exports=i("2pFd")("bfRH")},plsW:(t,n,i)=>{t.exports=i("2pFd")("o4sN")},"2pFd":t=>{"use strict";t.exports=window.adobe_dc_sdk["dc-core"]}},o={};function __webpack_require__(t){var n=o[t];if(void 0!==n)return n.exports;var s=o[t]={id:t,loaded:!1,exports:{}};return i[t].call(s.exports,s,s.exports,__webpack_require__),s.loaded=!0,s.exports}__webpack_require__.m=i,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=(t,n)=>{for(var i in n)__webpack_require__.o(n,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},__webpack_require__.f={},__webpack_require__.e=t=>Promise.all(Object.keys(__webpack_require__.f).reduce(((n,i)=>(__webpack_require__.f[i](t,n),n)),[])),__webpack_require__.u=t=>({90:"ajsProvider",611:"fontHelper"}[t]+"-chunk.js"),__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),t={},n="adobe_dc_sdk.components.rendition:",__webpack_require__.l=(i,o,s,c)=>{if(t[i])t[i].push(o);else{var u,l;if(void 0!==s)for(var d=document.getElementsByTagName("script"),f=0;f<d.length;f++){var p=d[f];if(p.getAttribute("src")==i||p.getAttribute("data-webpack")==n+s){u=p;break}}u||(l=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,__webpack_require__.nc&&u.setAttribute("nonce",__webpack_require__.nc),u.setAttribute("data-webpack",n+s),u.src=i),t[i]=[o];var onScriptComplete=(n,o)=>{u.onerror=u.onload=null,clearTimeout(h);var s=t[i];if(delete t[i],u.parentNode&&u.parentNode.removeChild(u),s&&s.forEach((t=>t(o))),n)return n(o)},h=setTimeout(onScriptComplete.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=onScriptComplete.bind(null,u.onerror),u.onload=onScriptComplete.bind(null,u.onload),l&&document.head.appendChild(u)}},__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;__webpack_require__.g.importScripts&&(t=__webpack_require__.g.location+"");var n=__webpack_require__.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var i=n.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=t})(),(()=>{var t={143:0};__webpack_require__.f.j=(n,i)=>{var o=__webpack_require__.o(t,n)?t[n]:void 0;if(0!==o)if(o)i.push(o[2]);else{var s=new Promise(((i,s)=>o=t[n]=[i,s]));i.push(o[2]=s);var c=__webpack_require__.p+__webpack_require__.u(n),u=new Error;__webpack_require__.l(c,(i=>{if(__webpack_require__.o(t,n)&&(0!==(o=t[n])&&(t[n]=void 0),o)){var s=i&&("load"===i.type?"missing":i.type),c=i&&i.target&&i.target.src;u.message="Loading chunk "+n+" failed.\n("+s+": "+c+")",u.name="ChunkLoadError",u.type=s,u.request=c,o[1](u)}}),"chunk-"+n,n)}};var webpackJsonpCallback=(n,i)=>{var o,s,[c,u,l]=i,d=0;if(c.some((n=>0!==t[n]))){for(o in u)__webpack_require__.o(u,o)&&(__webpack_require__.m[o]=u[o]);if(l)l(__webpack_require__)}for(n&&n(i);d<c.length;d++)s=c[d],__webpack_require__.o(t,s)&&t[s]&&t[s][0](),t[s]=0},n=self["webpackJsonp-rendition"]=self["webpackJsonp-rendition"]||[];n.forEach(webpackJsonpCallback.bind(null,0)),n.push=webpackJsonpCallback.bind(null,n.push.bind(n))})();var s={};(()=>{"use strict";__webpack_require__.r(s),__webpack_require__.d(s,{RenditionAPI:()=>X,providers:()=>Q});var t=__webpack_require__("6rni"),n=__webpack_require__.n(t),i=__webpack_require__("uY7Q"),o=__webpack_require__.n(i),c=__webpack_require__("sdTo"),u=__webpack_require__.n(c),l=__webpack_require__("sR8A");const d="11.47.0";var f=__webpack_require__("plsW"),p=__webpack_require__("4PKp"),h=__webpack_require__("ibkQ");const v=function makeCancellablePromise(t){var n=!1,i=t;return i||(i=Promise.reject()),{promise:new Promise((function(t,o){i.then((function(i){return!n&&t(i)})).catch((function(t){return!n&&o(t)}))})),cancel:function cancel(){n=!0}}};var _=[],m=function renditionMakeCancellablePromise(t){var n=v(t);return _.push(n),n.promise},g=function isIE(){return!!document.documentMode};function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,n)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=t[i];return o}var y=function getDigest(t){return g()?window.msCrypto.subtle.digest("SHA-256",t):window.crypto&&window.crypto.subtle?window.crypto.subtle.digest("SHA-256",t):Promise.reject("Crypto is not supported")},b=function getDigestHex(t){return _toConsumableArray(new Uint8Array(t)).map((function(t){return t.toString(16).padStart(2,"0")})).join("")},P=function stringToUint8ArrayBuffer(t){var n,i,o,s,c,u=0;if(t){for(u=t.length,n=-1,i="undefined"==typeof Uint8Array?new Array(1.5*u):new Uint8Array(3*u),o=0,s=0,c=0;c!==u;){if(o=t.charCodeAt(c),c+=1,o>=55296&&o<=56319){if(c===u){i[n+=1]=239,i[n+=1]=191,i[n+=1]=189;break}(s=t.charCodeAt(c))>=56320&&s<=57343?(c+=1,(o=1024*(o-55296)+(s-56320+65536))>65535&&(i[n+=1]=240|o>>>18,i[n+=1]=128|o>>>12&63,i[n+=1]=128|o>>>6&63,i[n+=1]=128|63&o)):(i[n+=1]=239,i[n+=1]=191,i[n+=1]=189)}o<=127?i[n+=1]=0|o:o<=2047?(i[n+=1]=192|o>>>6,i[n+=1]=128|63&o):(i[n+=1]=224|o>>>12,i[n+=1]=128|o>>>6&63,i[n+=1]=128|63&o)}return"undefined"!=typeof Uint8Array?i.subarray(0,n+1):(i.length=n+1,i)}return""},k=function getSHA256Digest(t){return new Promise((function(n,i){if(g()){var o=P(t),s="",c=y(o);c.process(o),c.finish(),c.oncomplete=function onComplete(){if(null!==(s=c.result)){var t=b(s);n(t)}else i("documentIdHash error")}}else{var u=function isEdge(){return/Edge/.test(navigator.userAgent)}()?P(t):(new TextEncoder).encode(t);y(u).then((function(t){var i=b(t);n(i)})).catch((function(t){i(t)}))}}))},A=__webpack_require__("RbXz"),S=__webpack_require__("zSZc"),R=__webpack_require__("GNuk"),T=__webpack_require__("6mnL"),D=function getStreamRequestHeaders(t,n){return new Headers({Accept:"application/json, text/plain, */*",Authorization:n,"x-api-key":t})},I=function uploadStream(t,n,i,o,s){return new Promise((function(c,u){var l="".concat(n,"/").concat(s),d=D(i,o),f=function getUploadStreamRequestBody(t){var n=new FormData;return n.append("contentAnalyzerRequests",'{\n        "sensei:engines": [{\n          "sensei:execution_info": {\n            "sensei:engine": "Annotation:pdf-object-detection:Service-61274bccdf4e4177b62ee988d67b9989"\n          },\n          "sensei:inputs": {\n            "in_stream": {\n              "sensei:multipart_field_name": "in_stream",\n              "dc:format":"application/pdf+dcxucf"\n            }\n          },\n          "sensei:outputs": {\n            "out_stream": {\n              "sensei:multipart_field_name": "out_stream",\n              "dc:format":"application/zip"\n            }\n          },\n          "sensei:params": {\n            "client_analytics_consent":true,\n            "result_format":"cnpdf_updates",\n            "save_intermediate_files":false,\n            "degree_of_parallelism": 1,\n            "overrides":"",\n            "provisional":true\n          }\n        }]\n      }'),n.append("in_stream",t),n}(t);fetch(l,{method:"POST",headers:d,body:f}).then((function(t){c(t)})).catch((function(t){u(t)}))}))};const C=function fetchCNFTPDFUpdatesCallback(t){var n=t.cnpdfZipData,i=t.mimeType;return new Promise((function(t,o){var s=function generateTransactionId(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n="",i="0123456789",o=i.length,s=0;s<t;s+=1)n+=i.charAt(Math.floor(Math.random()*o));return n}();(function getIMSAccessToken(){return new Promise((function(t,n){var i=window.adobeIMS;if(i&&i.getAccessToken){var o=i.getAccessToken().token;if(o)return void t(o);n(Error("IMS token not available"))}n(Error("API for IMS token not available"))}))})().then((function(o){var c=new Blob([n],{type:i});I(c,"".concat("https://senseis-stage.adobe.io/services/v2/stream/predict"),"".concat("AdobeSenseiPredictServiceStageKey"),o,s),function downloadStream(t,n,i,o){return new Promise((function(s,c){var u="".concat(t,"/").concat(o),l=D(n,i);fetch(u,{method:"GET",headers:l}).then((function(t){s(t.body)})).catch((function(t){c(t)}))}))}("".concat("https://senseis-stage.adobe.io/services/v2/stream/predict"),"".concat("AdobeSenseiPredictServiceStageKey"),o,s).then((function(n){t(n)}))})).catch((function(t){o(t)}))}))};function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var M=["buffer"],x=["priority","viewState"],L=["priority","viewState"];function _objectWithoutProperties(t,n){if(null==t)return{};var i,o,s=function _objectWithoutPropertiesLoose(t,n){if(null==t)return{};var i,o,s={},c=Object.keys(t);for(o=0;o<c.length;o++)i=c[o],n.indexOf(i)>=0||(s[i]=t[i]);return s}(t,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(o=0;o<c.length;o++)i=c[o],n.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}function _slicedToArray(t,n){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,n){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var o,s,c=[],u=!0,l=!1;try{for(i=i.call(t);!(u=(o=i.next()).done)&&(c.push(o.value),!n||c.length!==n);u=!0);}catch(t){l=!0,s=t}finally{try{u||null==i.return||i.return()}finally{if(l)throw s}}return c}(t,n)||function rendition_unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return rendition_arrayLikeToArray(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rendition_arrayLikeToArray(t,n)}(t,n)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rendition_arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=t[i];return o}function ownKeys(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,o)}return i}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(i),!0).forEach((function(n){_defineProperty(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}function _defineProperty(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function _defineProperties(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _wrapNativeSuper(t){var n="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t)},_wrapNativeSuper(t)}function _construct(t,n,i){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(t,n,i){var o=[null];o.push.apply(o,n);var s=new(Function.bind.apply(t,o));return i&&_setPrototypeOf(s,i.prototype),s},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _setPrototypeOf(t,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,n){return t.__proto__=n,t},_setPrototypeOf(t,n)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(t,n,i){return Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{define({},"")}catch(t){define=function define(t,n,i){return t[n]=i}}function wrap(t,n,i,o){var s=n&&n.prototype instanceof Generator?n:Generator,c=Object.create(s.prototype),u=new Context(o||[]);return c._invoke=function(t,n,i){var o="suspendedStart";return function(s,c){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===s)throw c;return doneResult()}for(i.method=s,i.arg=c;;){var u=i.delegate;if(u){var d=maybeInvokeDelegate(u,i);if(d){if(d===l)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===o)throw o="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o="executing";var f=tryCatch(t,n,i);if("normal"===f.type){if(o=i.done?"completed":"suspendedYield",f.arg===l)continue;return{value:f.arg,done:i.done}}"throw"===f.type&&(o="completed",i.method="throw",i.arg=f.arg)}}}(t,i,u),c}function tryCatch(t,n,i){try{return{type:"normal",arg:t.call(n,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var l={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,s,(function(){return this}));var f=Object.getPrototypeOf,p=f&&f(f(values([])));p&&p!==n&&i.call(p,s)&&(d=p);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(n){define(t,n,(function(t){return this._invoke(n,t)}))}))}function AsyncIterator(t,n){function invoke(o,s,c,u){var l=tryCatch(t[o],t,s);if("throw"!==l.type){var d=l.arg,f=d.value;return f&&"object"==_typeof(f)&&i.call(f,"__await")?n.resolve(f.__await).then((function(t){invoke("next",t,c,u)}),(function(t){invoke("throw",t,c,u)})):n.resolve(f).then((function(t){d.value=t,c(d)}),(function(t){return invoke("throw",t,c,u)}))}u(l.arg)}var o;this._invoke=function(t,i){function callInvokeWithMethodAndArg(){return new n((function(n,o){invoke(t,i,n,o)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,n){var i=t.iterator[n.method];if(void 0===i){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,maybeInvokeDelegate(t,n),"throw"===n.method))return l;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var o=tryCatch(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,l;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,l):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,l)}function pushTryEntry(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function resetTryEntry(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,c=function next(){for(;++o<t.length;)if(i.call(t,o))return next.value=t[o],next.done=!1,next;return next.value=void 0,next.done=!0,next};return c.next=c}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(h,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===GeneratorFunction||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(h),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(n,i,o,s,c){void 0===c&&(c=Promise);var u=new AsyncIterator(wrap(n,i,o,s),c);return t.isGeneratorFunction(i)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},defineIteratorMethods(h),define(h,u,"Generator"),define(h,s,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var i in t)n.push(i);return n.reverse(),function next(){for(;n.length;){var i=n.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var n=this;function handle(i,o){return c.type="throw",c.arg=t,n.next=i,o&&(n.method="next",n.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],c=s.completion;if("root"===s.tryLoc)return handle("end");if(s.tryLoc<=this.prev){var u=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(u&&l){if(this.prev<s.catchLoc)return handle(s.catchLoc,!0);if(this.prev<s.finallyLoc)return handle(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return handle(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return handle(s.finallyLoc)}}}},abrupt:function abrupt(t,n){for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o];if(s.tryLoc<=this.prev&&i.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var c=s;break}}c&&("break"===t||"continue"===t)&&c.tryLoc<=n&&n<=c.finallyLoc&&(c=null);var u=c?c.completion:{};return u.type=t,u.arg=n,c?(this.method="next",this.next=c.finallyLoc,l):this.complete(u)},complete:function complete(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),l},finish:function finish(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),l}},catch:function _catch(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var s=o.arg;resetTryEntry(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,n,i){return this.delegate={iterator:values(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=void 0),l}},t}function asyncGeneratorStep(t,n,i,o,s,c,u){try{var l=t[c](u),d=l.value}catch(t){return void i(t)}l.done?n(d):Promise.resolve(d).then(o,s)}var N=null,B=["/onedrive","/sharepoint","/gdrive"],W={"/onedrive":"OneDrive","/sharepoint":"SharePoint","/gdrive":"GDrive"},U=1e3,G=l.enums.PageRequestType,q="S3",z="DCAPI",H="NONE",J=function cloneDeep(t){return JSON.parse(JSON.stringify(t))},V=function(){var t=function _asyncToGenerator(t){return function(){var n=this,i=arguments;return new Promise((function(o,s){var c=t.apply(n,i);function _next(t){asyncGeneratorStep(c,o,s,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(c,o,s,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){return _regeneratorRuntime().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){return setTimeout(n,t)})));case 1:case"end":return n.stop()}}),_callee)})));return function delay(n){return t.apply(this,arguments)}}(),K=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&_setPrototypeOf(t,n)}(NoRenditionError,t);var n=function _createSuper(t){var n=_isNativeReflectConstruct();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(n){var s=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,s)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}(NoRenditionError);function NoRenditionError(t){var i;return _classCallCheck(this,NoRenditionError),(i=n.call(this,t)).code=415,i}return _createClass(NoRenditionError)}(_wrapNativeSuper(Error)),X=function(){function RenditionAPI(t,n){var i=this;return _classCallCheck(this,RenditionAPI),this._getFileInfoObj=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(f.auth2.isSignedIn&&!i._isS3DownloadUrl){var s=f.auth2.getAccessTokenInfo();s.access_token&&o.push({key:"Authorization",value:"Bearer ".concat(s.access_token)})}return n&&!("id"in n)&&(n.id=n.asset_id),{content:{location:{url:t,headers:o}},metaData:n}},this._fetchPDFBufferRanges=function(t,n,o){return 1===o.length&&0===o[0].start&&void 0===o[0].end?i._fetchCompletePDFBufferPromise.then((function(t){return[t]})):(i._externalInitPromise()&&i._externalInit(),i.externalPromise.then((function(){return i._externalGetDownloadUri(t,n).then((function(t){return i._external.fetchPDFBufferRanges(t,o)}))})))},this._fetchPDFSize=function(t,n){return i._externalInitPromise()&&i._externalInit(),i.externalPromise.then((function(){return i._externalGetDownloadUri(t,n).then((function(t){return i._external.fetchPDFSize(t)}))}))},N=this,this.queryParams=(0,R.v)(),this.options=Object.assign({},{useDCAPI:"false"!==this.queryParams.useDCAPI,enableExternal:!0,useAJS:!0,AJSDelay:0,useReview:!0,usePDFNow:!1,fetchWithCredentials:!1,enableAJSLogging:"true"===this.queryParams.enableAJSLogging,autoStart:!0,useAJSFullBuild:"true"===this.queryParams.useAJSFullBuild,shouldUseModernViewer:!1},n),this._fetchCompletePDFBufferPromise=null,this._assetRenditions={},this._assetRenditionsIndex=[],this._assetPageRenditions={},this._assetPageRenditionsIndex=[],this._perfTimings={},this._resetAjsPerfTimings(),this.options.autoStart&&this.init(),N}return _createClass(RenditionAPI,[{key:"init",value:function init(){var t=this;this.options.useDCAPI?(this.dcapiPromise=new Promise((function(n,i){t.dcapiResolve=n,t.dcapiReject=i})),this._dcapiInit()):this.dcapiPromise=Promise.resolve(),this.options.useAJS&&(this._completePDFBufferAvailablePromise=new Promise((function(n){t._completePDFBufferAvailablePromiseResolve=n})),this.options.AJSDelay>0?setTimeout(this._getAjs.bind(this),this.options.AJSDelay):this._getAjs())}},{key:"_resetAjsPerfTimings",value:function _resetAjsPerfTimings(){this.options.useAJS&&(this._perfTimings.ajs={})}},{key:"_getDCAssetFileInfo",value:function _getDCAssetFileInfo(t){var n=this;return this.dcapiPromise.then((function(){var i=n._dcapiGetMetadata(t,{}),o=n._dcapiGetDownloadUri(t,{});return Promise.all([o,i])})).then((function(t){var i=t[0],o=t[1];return n._getFileInfoObj(i,o,[])}))}},{key:"_getPDFNowAssetFileInfo",value:function _getPDFNowAssetFileInfo(t,n){var i=this;return this.dcapiPromise.then((function(){return i._dcapiGetMetadata(t,n)})).then((function(t){var n=t;return n&&!("id"in n)&&(n.id=n.asset_id),{metaData:n}}))}},{key:"_getReviewAssetFileInfo",value:function _getReviewAssetFileInfo(t){var n=this,i=this._reviewGetMetadata(t),o=this._reviewGetDownloadUri(t);return Promise.all([o,i]).then((function(t){var i=t[0],o=t[1];return n._getFileInfoObj(i,o,[])}))}},{key:"getAssetFileInfo",value:function getAssetFileInfo(t,n){var i=this;return RenditionAPI._isReviewAsset(n)||RenditionAPI._isParcelAsset(n)?this._getReviewAssetFileInfo(t):RenditionAPI._isPDFNowAsset(n)?this._getPDFNowAssetFileInfo(t,n):RenditionAPI._isConnectorAsset(n)?this._connectorGetMetadata(t,n).then((function(o){return o&&!("id"in o)&&(o.id=o.asset_id),o.download_url?Promise.resolve({content:{location:{url:o.download_url}},metaData:o}):i._connectorGetContentBuffer(t,n).then((function(t){var n=new Blob([t]);return Promise.resolve({content:{location:{url:URL.createObjectURL(n)}},metaData:o})}))})):this._getDCAssetFileInfo(t)}},{key:"getDcapiRendition",value:function getDcapiRendition(t,n){return this._dcapiGetRendition(t,n)}},{key:"_ajsInit",value:function _ajsInit(){var t=this;this._getAjs().subscribe(this._onAjsEvent.bind(this)),this._getAjs().init().catch((function(n){t.options.useAJS=!1,t._ajsEmit("ajsInitFailed",n)}))}},{key:"_ajsSetup",value:function _ajsSetup(){var t={ajsPath:RenditionAPI._ajsGetPath(),workerCreator:N.getAJSWorker,enableLogging:this.options.enableAJSLogging,useFullBuild:this.options.useAJSFullBuild};this.ajs=new l.AcrobatJS(_objectSpread({},t)),this._perfTimings.ajs.acrobatJSVersion=d,this._ajsInit()}},{key:"_getAjs",value:function _getAjs(){return this.options.useAJS&&!this.ajs&&this._ajsSetup(),this.ajs}},{key:"_ajsEmit",value:function _ajsEmit(t,n){var i=_objectSpread(_objectSpread({},n),{},{acrobatJSVersion:d,browser:navigator.userAgent,shouldUseModernViewer:this.options.shouldUseModernViewer});(0,h.K)(t,i)}},{key:"_onAjsEvent",value:function _onAjsEvent(t,n,i){var o=this,s="".concat(i,"PerfTimings");switch(t){case"completePDFBufferAvailable":this._completePDFBufferAvailablePromiseResolve();break;case s:this._perfTimings[i]=Object.assign({},this._perfTimings[i],n);break;case"FontUsed":f.providers["font-provider"]().then((function(t){!n.isInEditMode&&n.fontsList&&n.fontsList.forEach((function(n){t.isUsageUnReported(n)&&o._ajsEmit("FontUsageNotReported",{fontName:n})}))}));break;default:this._ajsEmit(t,n)}}},{key:"_dcapiInit",value:function _dcapiInit(){var t=this;this._perfTimings.dc={dcapiInit:performance.now()},f.providers&&f.providers.dcapi&&f.providers.dcapi().then((function(n){t._dcapi=n.getDcapi(),t._dcapi.promise().then((function(){t._perfTimings.dc.dcapiLoaded=performance.now(),t.dcapiResolve()})).catch((function(n){(0,h.K)(n,{code:n.code,level:"error"}),t.dcapiReject()}))}))}},{key:"_pdfnowInitPromise",value:function _pdfnowInitPromise(){var t=this;return!this.pdfnowApiPromise&&(this.options.usePDFNow?(this.pdfnowApiPromise=new Promise((function(n,i){t.pdfnowApiResolve=n,t.pdfnowApiReject=i})),!0):(this.pdfnowApiPromise=Promise.resolve(),!1))}},{key:"_pdfnowInit",value:function _pdfnowInit(){var t=this;void 0!==f.providers&&f.providers["dcapi-facade"]().then((function(n){return n.getDcapi().then((function(n){t._pdfnowDcapi=n,t.pdfnowApiResolve()}))})).catch((function(n){(0,h.K)(n,{code:n.code,level:"error"}),t.pdfnowApiReject()}))}},{key:"_resetReviewProvider",value:function _resetReviewProvider(){this.reviewApiPromise=void 0,this._initReviewProviderIfRequired()}},{key:"_initReviewProviderIfRequired",value:function _initReviewProviderIfRequired(){this._reviewInitPromise()&&this._reviewInit()}},{key:"_reviewInitPromise",value:function _reviewInitPromise(){var t=this;return!this.reviewApiPromise&&(this.options.useReview?(this.reviewApiPromise=new Promise((function(n,i){t.reviewApiResolve=n,t.reviewApiReject=i})),!0):(this.reviewApiPromise=Promise.resolve(),!1))}},{key:"_reviewInit",value:function _reviewInit(){var t=this;void 0!==f.providers&&f.providers["review-handler"]().then((function(n){t._reviewApi=n,t.reviewApiResolve()})).catch((function(n){(0,h.K)(n,{code:n.code,level:"error"}),t.reviewApiReject()}))}},{key:"_externalInitPromise",value:function _externalInitPromise(){var t=this;return!this.externalPromise&&(this.options.enableExternal?(this.externalPromise=new Promise((function(n,i){t.externalResolve=n,t.externalReject=i})),!0):(this.externalPromise=Promise.resolve(),!1))}},{key:"_externalInit",value:function _externalInit(){var t=this;void 0!==f.providers&&f.providers.integrationProvider().then((function(n){t._external=n,t.externalResolve()})).catch((function(n){(0,h.K)(n,{code:n.code,level:"error"}),t.externalReject()}))}},{key:"_cacheRendition",value:function _cacheRendition(t,n){this._assetRenditions[t]||(500===this._assetRenditionsIndex.length&&delete this._assetRenditions[this._assetRenditionsIndex.shift()],this._assetRenditionsIndex.push(t)),this._assetRenditions[t]=o()(this._assetRenditions[t],n)}},{key:"_cachePageRendition",value:function _cachePageRendition(t,n,i){var s="".concat(t,"-").concat(n);this._assetPageRenditions[s]||(500===this._assetPageRenditionsIndex.length&&delete this._assetPageRenditions[this._assetPageRenditionsIndex.shift()],this._assetPageRenditionsIndex.push(s)),this._assetPageRenditions[s]=o()(this._assetPageRenditions[s],i)}},{key:"_dcapiGetAssetUri",value:function _dcapiGetAssetUri(t){return this._dcapi&&t.startsWith("urn:")?this._dcapi.getTemplateURI("asset_uri",{asset_id:t}):t}},{key:"_dcapiMetadataCall",value:function _dcapiMetadataCall(t,i){var o=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new Promise((function(c,u){o._dcapi.call("assets.get_metadata",{accept:"asset_metadata_basic_v1.json",resource_parameter:o._dcapiGetAssetUri(t),headers:{"x-request-id":n().v4()}}).then((function(n){var l,d=n,f=d.content.page_count;if(d.content.numPages=f,(i.enableRetryForPDFs||o.queryParams.enableRetryForPDFs||"application/pdf"!==d.content.type)&&!f){var p="application/pdf"===d.content.type?10:5,h="application/pdf"===d.content.type?U:0;s===p?d.content.numPages=1:l=new Promise((function(n,c){setTimeout((function(){o._dcapiMetadataCall(t,i,s+1).then(n).catch(c)}),h)}))}l||(l=Promise.resolve(d)),l.then(c).catch(u)}),(function(t){u(t)}))}))}},{key:"_dcapiGetMetadata",value:function _dcapiGetMetadata(t,n){var i=this;return this._assetRenditions[t]&&this._assetRenditions[t].dcapi&&this._assetRenditions[t].dcapi.contentData&&!0!==n.forceCacheless?Promise.resolve(this._assetRenditions[t].dcapi.contentData):RenditionAPI._isReviewAsset(n)||RenditionAPI._isParcelAsset(n)?this._reviewGetMetadata(t,n):RenditionAPI._isPDFNowAsset(n)?this._pdfnowGetMetadata(t,n):RenditionAPI._isConnectorAsset(n)?this._connectorGetMetadata(t,n):new Promise((function(o,s){i.dcapiPromise.then((function(){var c=i._dcapiMetadataCall(t,n),u=i._dcapiGetDocumentRenditionStatus(t);Promise.all([c,u]).then((function(n){var s=_slicedToArray(n,2),c=s[0],u=s[1];i._cacheRendition(t,{dcapi:{contentData:J(c.content)}}),i._cacheRendition(t,{dcapi:{contentData:{documentRenditionStatus:u}}}),o(i._assetRenditions[t].dcapi.contentData)})).catch(s)}))}))}},{key:"_dcapiIsPDFAsset",value:function _dcapiIsPDFAsset(t,n){var i=this;return new Promise((function(o,s){n.useDCAPI?i._dcapiGetMetadata(t,n).then((function(){i._assetRenditions[t]&&"application/pdf"===i._assetRenditions[t].dcapi.contentData.type?o():s()})).catch(s):o()}))}},{key:"_isPDFAsset",value:function _isPDFAsset(t,n){var i=this;return new Promise((function(o,s){n&&"application/pdf"===n.assetMimeType?o():i._dcapiIsPDFAsset(t,n).then(o).catch(s)}))}},{key:"_ajsPostMetaData",value:function _ajsPostMetaData(t,n){var i=this;return this._fetchCompletePDFBufferPromise=this._fetchCompletePDFBuffer(t,n),n.enableLinearization&&!n.password?m(this._ajsGetLinearizedContentData(t,n)):this._fetchCompletePDFBufferPromise.then((function(t){return m(i._ajsGetContentData(t,n)).catch((function(n){var i=ArrayBuffer.isView(t)?t.buffer:t;return(0,h.K)("ajsGetContentData Failed",{error:JSON.stringify(n),size:i?i.byteLength:-1}),Promise.reject(n)}))}))}},{key:"_fetchCompletePDFBuffer",value:function _fetchCompletePDFBuffer(t,n){var i=this;return(RenditionAPI._isExternalAsset(n)?m(this._externalGetDownloadUri(t,n)).catch((function(t){return(0,h.K)("GetDownloadUri failed",{assetType:"external",error:JSON.stringify(t)}),Promise.reject(t)})).then((function(n){return m(i._externalGetContentBuffer(t,n)).catch((function(t){return(0,h.K)("GetContentBuffer failed",{assetType:"external",error:JSON.stringify(t)}),Promise.reject(t)}))})):m(this._isPDFAsset(t,n)).catch((function(t){return(0,h.K)("Non PDF asset in AJS flow",{assetType:"non-external",error:JSON.stringify(t)}),Promise.reject(t)})).then((function(){return m(i._dcapiGetDownloadUri(t,n)).catch((function(t){return(0,h.K)("GetDownloadUri failed",{assetType:"non-external",error:JSON.stringify(t)}),Promise.reject(t)})).then((function(o){return i._perfTimings.ajs.pdfDownloadStart=performance.now(),(0,h.K)("pdfDownloadStartTime",{pdfDownloadStart:i._perfTimings.ajs.pdfDownloadStart}),m(i._dcapiGetContentBuffer(t,o,n)).catch((function(t){return(0,h.K)("GetContentBuffer failed",{assetType:"non-external",error:JSON.stringify(t)}),Promise.reject(t)}))}))}))).then((function(o){if(RenditionAPI._isExternalAsset(n)){var s=i._external.apis.file.getDownloadTimes();i._perfTimings.ajs.pdfDownloadStart=s.pdfDownloadStartTime,i._perfTimings.ajs.pdfDownloadEnd=s.pdfDownloadEndTime,(0,h.K)("pdfDownloadStartTime",{pdfDownloadStart:i._perfTimings.ajs.pdfDownloadStart}),i._getFileSize(t,n).then((function(t){i._logPdfDownloadTotalTime(t)})).catch((function(){i._logPdfDownloadTotalTime(0)}))}else i._perfTimings.ajs.pdfDownloadEnd=performance.now(),(0,h.K)("pdfDownloadTotalTime",{pdfDownloadTotalTime:performance.now()-i._perfTimings.ajs.pdfDownloadStart}),i._setDownloadUrlType(H);return o}))}},{key:"_getFileSize",value:function _getFileSize(t,n){return this._externalGetMetadata(t,n).then((function(t){return t.size?t.size:0}))}},{key:"_logPdfDownloadTotalTime",value:function _logPdfDownloadTotalTime(t){(0,h.K)("pdfDownloadTotalTime",{pdfDownloadTotalTime:this._perfTimings.ajs.pdfDownloadEnd-this._perfTimings.ajs.pdfDownloadStart,fileSize:t,isS3Url:this._isS3DownloadUrl}),this._setDownloadUrlType(H)}},{key:"_ajsGetMetadata",value:function _ajsGetMetadata(t,n){var i=this,o=n?_objectSpread({},n):{};return m(k(t)).then((function(t){(0,h.E)(t)})).catch((function(){i._documentId=""})).then((function(){if(!0!==o.forceCacheless&&i._assetRenditions[t]&&i._assetRenditions[t].ajs&&i._assetRenditions[t].ajs.metadataPromise)return i._assetRenditions[t].ajs.metadataPromise;var n=i._ajsPostMetaData(t,o);return i._cacheRendition(t,{ajs:{metadataPromise:n}}),n}))}},{key:"_externalGetMetadata",value:function _externalGetMetadata(t,n){var i=this;return this._assetRenditions[t]&&this._assetRenditions[t].external&&this._assetRenditions[t].external.metadata&&!0!==n.forceCacheless?Promise.resolve(this._assetRenditions[t].external.metadata):(this._externalInitPromise()&&this._externalInit(),this.externalPromise.then((function(){return i._external.getSelectedFilesListFromFileIds([t]).then((function(n){return i._cacheRendition(t,{external:{metadata:n[0]}}),n[0]}))})))}},{key:"_externalGetDownloadUri",value:function _externalGetDownloadUri(t,n){var i=this;return this._assetRenditions[t]&&this._assetRenditions[t].external&&this._assetRenditions[t].external.downloadUri&&!0!==n.forceCacheless?Promise.resolve(this._assetRenditions[t].external.downloadUri):this._externalGetMetadata(t,n).then((function(n){return n.downloadUrl?(i._cacheRendition(t,{external:{downloadUri:n.downloadUrl}}),n.downloadUrl):Promise.reject(new Error("Download Uri not available"))}))}},{key:"_externalGetContentBuffer",value:function _externalGetContentBuffer(t,n){var i=this;return this._assetRenditions[t]&&this._assetRenditions[t].external&&this._assetRenditions[t].external.contentBuffer?Promise.resolve(this._assetRenditions[t].external.contentBuffer):(this._externalInitPromise()&&this._externalInit(),this.externalPromise.then((function(){return i._external.getFileContents(n).then((function(n){return i._cacheRendition(t,{external:{contentBuffer:n},ajs:{contentBuffer:n}}),n}))})))}},{key:"_connectorGetRendition",value:function _connectorGetRendition(t,n){var i=this,o=n.size||"3200",s="".concat(t,"-").concat(0);if(!0===n.forceCacheless||!this._assetPageRenditions[s]||!this._assetPageRenditions[s].connector||!this._assetPageRenditions[s].connector.pageImgBuffer||this._assetPageRenditions[s].connector.size!==o||0!==this._assetPageRenditions[s].connector.page){var c=new URLSearchParams(window.location.search),u=W[n.assetType];return u?f.providers["storage-connectors"]().then((function(s){return s.getStorageProvider(u).then((function(u){var l=c.get("connectorid");return l||(l=n.connectorId),u.getRendition(t,s.getConnectorById(l),{size:o}).then((function(n){var s={params:{pageImgBuffer:n,mimeType:"image/png",pageNum:0}};return i._cachePageRendition(t,0,{connector:{pageImgBuffer:n,size:o,page:0}}),s}))}))})).catch((function(t){throw new K(t&&t.message||"Unknown")})):Promise.reject(new Error("Not supported"))}var l=this._assetPageRenditions[s].connector,d={params:{pageImgBuffer:l.pageImgBuffer,mimeType:"image/png",pageNum:l.page}};return Promise.resolve(d)}},{key:"_connectorGetMetadata",value:function _connectorGetMetadata(t,n){var i=this;if(!0===n.forceCacheless||!this._assetRenditions[t]||!this._assetRenditions[t].connector||!this._assetRenditions[t].connector.metaData){var o=new URLSearchParams(window.location.search),s=W[n.assetType];return s?f.providers["storage-connectors"]().then((function(n){return n.getStorageProvider(s).then((function(s){var c=o.get("connectorid");return s.getItem(t,n.getConnectorById(c)).then((function(o){var u=s.normalizeItem(o,n.getConnectorById(c));return"application/pdf"!==u.type&&(u.numPages=1,u.page_count=1),i._cacheRendition(t,{connector:{metaData:u},ajs:{metaData:u}}),u}))}))})):Promise.reject(new Error("Not supported"))}return Promise.resolve(this._assetRenditions[t].connector.metaData)}},{key:"_connectorGetContentBuffer",value:function _connectorGetContentBuffer(t,n){var i=this;if(!this._assetRenditions[t]||!this._assetRenditions[t].connector||!this._assetRenditions[t].connector.contentBuffer){var o=new URLSearchParams(window.location.search),s=W[n.assetType];return s?f.providers["storage-connectors"]().then((function(n){return n.getStorageProvider(s).then((function(s){var c=o.get("connectorid");return s.getFileContent(t,n.getConnectorById(c)).then((function(n){return i._cacheRendition(t,{connector:{contentBuffer:n},ajs:{contentBuffer:n}}),n}))}))})):Promise.reject(new Error("Not supported"))}return Promise.resolve(this._assetRenditions[t].connector.contentBuffer)}},{key:"_dcapiGetRenditionUri",value:function _dcapiGetRenditionUri(t){var i=this;return this._assetRenditions[t]&&this._assetRenditions[t].dcapi&&this._assetRenditions[t].dcapi.renditionUri?Promise.resolve(this._assetRenditions[t].dcapi.renditionUri):this._dcapi.call("assets.rendition_uri",{resource_parameter:this._dcapiGetAssetUri(t),accept:"asset_uri_rendition_v1.json",headers:{"x-request-id":n().v4()}}).then((function(n){return i._cacheRendition(t,{dcapi:{renditionUri:n.content.uri}}),n.content.uri}),(function(t){return Promise.reject(t)}))}},{key:"_externalGetRendition",value:function _externalGetRendition(t,n){var i=this,o=void 0!==n.pageNum?n.pageNum:1,s="".concat(t,"-").concat(o);return this._assetPageRenditions[s]&&this._assetPageRenditions[s].external&&this._assetPageRenditions[s].external.rendition&&this._assetPageRenditions[s].external.rendition[o]&&!0!==n.forceCacheless?Promise.resolve(this._assetPageRenditions[s].external.rendition[o]):(this._externalInitPromise()&&this._externalInit(),this.externalPromise.then((function(){return"function"!=typeof i._external.getRenditionByFileId?Promise.reject(new Error("Cannot get External rendition")):i._external.getRenditionByFileId(t,n).then((function(n){var s={external:{rendition:{}}};return s.external.rendition[o]={params:n},i._cachePageRendition(t,o,s),Promise.resolve({params:n})}),(function(t){return Promise.reject(t)}))})))}},{key:"_dcapiGetDirectRenditionForPage",value:function _dcapiGetDirectRenditionForPage(t,i){var o,s=this,c=i.size||"1200",u=i.format||"jpg",l=void 0!==i.pageNum?i.pageNum:1,d="".concat(t,"-").concat(l),f=this._assetPageRenditions[d];if(f&&(o=f.dcapi),o&&o.pageImgBuffer&&o.format===u&&o.size===c&&o.page===l){var p={params:{pageImgBuffer:o.pageImgBuffer,mimeType:o.mimeType,pageNum:o.page}};return Promise.resolve(p)}return this._dcapi.call("assets.rendition_direct",{accept:"image/*",resource_parameter:RenditionAPI._dcapiGetAssetUrn(t),uri_parameters:{size:c,format:u,page:l-1,processing_hint:"speed_over_quality"},headers:{"x-request-id":n().v4()},responseType:"arraybuffer"}).then((function(n){var i={params:{pageImgBuffer:n.content,mimeType:n.headers["content-type"],pageNum:l}};return s._cachePageRendition(t,l,{dcapi:{pageImgBuffer:n.content,mimeType:n.headers["content-type"],size:c,page:l,format:u}}),Promise.resolve(i)}),(function(t){return Promise.reject(t)}))}},{key:"_dcapiGetRendition",value:function _dcapiGetRendition(t,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=performance.now();return(RenditionAPI._isReviewAsset(n)||RenditionAPI._isParcelAsset(n)?this._reviewGetRendition(t,n):RenditionAPI._isPDFNowAsset(n)?this._pdfnowGetRendition(t,n):RenditionAPI._isConnectorAsset(n)?this._connectorGetRendition(t,n):this.dcapiPromise.then((function(){return i._dcapiGetDirectRenditionForPage(t,n)}))).catch((function(c){var u=c.code;if(404===u||429===u){if(o<10)return V(U).then((function(){return i._dcapiGetRendition(t,n,o+1)}));var l=n.format,d=n.size,f=n.type;(0,h.K)("dcapiGetRendition max retries",{asset_uri:t,code:u,format:l,level:"error",rendition_duration:performance.now()-s,size:d,type:f})}throw c}))}},{key:"_dcapiGetDocumentRenditionUri",value:function _dcapiGetDocumentRenditionUri(t,i){var o=this,s=i;return this.dcapiPromise.then((function(){var i=s.format||"owp";return o._assetRenditions[t]&&o._assetRenditions[t].dcapi&&o._assetRenditions[t].dcapi.documentRenditionUri?Promise.resolve(o._assetRenditions[t].dcapi.documentRenditionUri+(s.format?"&format=".concat(s.format):"")):o._dcapi.call("assets.rendition_uri",{resource_parameter:o._dcapiGetAssetUri(t),accept:"asset_uri_rendition_v1.json",uri_parameters:{make_ticket:"owp"===i,type:"document"},headers:{"x-request-id":n().v4()}}).then((function(n){return o._cacheRendition(t,{dcapi:{documentRenditionUri:n.content.uri}}),o._assetRenditions[t].dcapi.documentRenditionUri+(s.format?"&format=".concat(s.format):"")}),(function(t){return Promise.reject(t)}))}))}},{key:"_dcapiGetDocumentRendition",value:function _dcapiGetDocumentRendition(t,i){var o=this,s=i;return this.dcapiPromise.then((function(){var i=s.format||"owp";return s.format=void 0,o._dcapiGetDocumentRenditionUri(t,s).then((function(t){return o._dcapi.call("assets.document_rendition",{accept:"*/*",resource_parameter:t,uri_parameters:{format:i,fallback:"none"},headers:{"x-request-id":n().v4()},responseType:"arraybuffer"}).then((function(t){return t.content}))}))}))}},{key:"_dcapiGetDocumentRenditionStatus",value:function _dcapiGetDocumentRenditionStatus(t){var i=this;return this.dcapiPromise.then((function(){return i._dcapi.call("assets.document_rendition_status",{resource_parameter:i._dcapiGetAssetUri(t),accept:"asset_document_rendition_status_v1.json",headers:{"x-request-id":n().v4()}}).then((function(t){return t.content.document_rendition_status}),(function(t){return Promise.reject(t)}))}))}},{key:"_reviewGetDownloadUri",value:function _reviewGetDownloadUri(t){var n=this;return this._initReviewProviderIfRequired(),new Promise((function(i,o){n.reviewApiPromise.then((function(){var s=n._reviewApi.getReview(t),c=!0;if(void 0!==s){var u=performance.now();s.getFileDownloadURL("view",c).then((function(t){n._setDownloadUrlType(q),i(t),(0,h.K)("pdfDownloadUriTotalTime",{pdfDownloadUriTotalTime:performance.now()-u})})).catch((function(){return c=!1,s.getFileDownloadURL("view",c).then((function(t){n._setDownloadUrlType(z),i(t),(0,h.K)("pdfDownloadUriTotalTime",{pdfDownloadUriTotalTime:performance.now()-u})})).catch((function(t){n._setDownloadUrlType(H),(0,h.K)("Failed to fetch reviewDownloadUri",JSON.stringify(t))}))}))}else o(new Error("Review does not exist"))}))}))}},{key:"_setDownloadUrlType",value:function _setDownloadUrlType(t){this._downloadUrlType=t}},{key:"_isS3DownloadUrl",get:function get(){return this._downloadUrlType===q}},{key:"_reviewGetMetadata",value:function _reviewGetMetadata(t){var n=this;return this._initReviewProviderIfRequired(),new Promise((function(i,o){n.reviewApiPromise.then((function(){var s=n._reviewApi.getReview(t);void 0!==s?s.getSendBootstrapData().then((function(c){var u={};if(c&&c.meta_list&&c.meta_list instanceof Array&&c.meta_list.length>s.getDownloadAssetIndex()){var l=c.meta_list[s.getDownloadAssetIndex()];u.type=l.content_type,u.assetMimeType=l.content_type,u.name=l.name,u.last_pagenum=l.last_pagenum||0,u.numPages=l.page_count||0,u.size=l.size,n._cacheRendition(t,{dcapi:{contentData:J(u)}}),i(u)}else o(new Error("Invalid Bootstrap data"))})).catch((function(t){o(t)})):o(new Error("Review does not exist"))})).catch(o)}))}},{key:"_reviewGetRenditionAuthHeader",value:function _reviewGetRenditionAuthHeader(t){var n=t;return this._dcapi&&this._dcapi.session&&this._dcapi.session.content&&this._dcapi.session.content.access_token&&(n.headers={Authorization:"Bearer ".concat(this._dcapi.session.content.access_token)}),n}},{key:"_getReviewRenditionURL",value:function _getReviewRenditionURL(t,n){var i=this,o=void 0!==n.pageNum?n.pageNum-1:0,s=parseInt(n.size||"1200",10);return s>500&&RenditionAPI._isReviewAsset(n)?Promise.reject():new Promise((function(n,c){i.reviewApiPromise.then((function(){i._reviewApi.instantiateReview().then((function(){void 0!==i._reviewApi.getReview(t)?t?(i.filesTierBaseUriPromise=f.providers.user().then((function(t){return t.getFilesTierBaseUris()})),i.filesTierBaseUriPromise.then((function(i){var c,u=i.send_api.replace("/api/","/invitation/"),l="".concat(u+encodeURIComponent(t),"/asset/asset-0");switch(!0){case s<=30:c="/icon";break;case s<=120:c="/thumbnail";break;case s<=500:c="/tile";break;default:c="/preview"}l+=c,o&&(l+="?page=".concat(o)),n(l)}),c)):c(new Error("Invalid Bootstrap data")):c(new Error("Review does not exist"))}),c)})).catch(c)}))}},{key:"_reviewGetRendition",value:function _reviewGetRendition(t,n){var i=this;this._initReviewProviderIfRequired();var o=n.size||"1200";return new Promise((function(s,c){i._getReviewRenditionURL(t,n).then((function(u){var l={withCredentials:i.options.fetchWithCredentials};(l=i._reviewGetRenditionAuthHeader(l)).headers||(l.headers={}),Object.assign(l.headers,{ACCEPT:"application/vnd.adobe.skybox+json;version=1","x-api-client-id":"api_browser"});var d=void 0!==n.pageNum?n.pageNum:1,f="".concat(t,"-").concat(d);if(i._assetPageRenditions[f]&&i._assetPageRenditions[f].dcapi&&i._assetPageRenditions[f].dcapi.pageImgBuffer&&i._assetPageRenditions[f].dcapi.renditionUri===u&&i._assetPageRenditions[f].dcapi.size===o&&i._assetPageRenditions[f].dcapi.page===d){var p={params:{pageImgBuffer:i._assetPageRenditions[f].dcapi.pageImgBuffer,mimeType:i._assetPageRenditions[f].dcapi.mimeType,pageNum:i._assetPageRenditions[f].dcapi.page}};s(p)}else RenditionAPI._fetchWithCredentials(u,l).then((function(n){var f;n&&200===n.status&&n.content&&(f=JSON.parse(n.content).url);f?(l={responseType:"arraybuffer",withCredentials:i.options.fetchWithCredentials},(l=i._reviewGetRenditionAuthHeader(l)).headers||(l.headers={}),RenditionAPI._fetchWithCredentials(f,l).then((function(n){var c={params:{pageImgBuffer:n.content,mimeType:n.headers["content-type"],pageNum:d}};i._cachePageRendition(t,d,{dcapi:{renditionUri:u,pageImgBuffer:n.content,mimeType:n.headers["content-type"],size:o,page:d}}),s(c)})).catch((function(t){c(t)}))):c(new Error("Redirect url could not be obtained"))})).catch((function(t){c(t)}))})).catch((function(){c(new Error("Review Rendition url could not be created"))}))}))}},{key:"_dcapiGetDownloadUri",value:function _dcapiGetDownloadUri(t,i){var o=this;if(RenditionAPI._isReviewAsset(i)||RenditionAPI._isParcelAsset(i))return this._reviewGetDownloadUri(t,i);if(RenditionAPI._isSignAsset(i))return Promise.resolve(t);if(!this.options.useDCAPI)return Promise.resolve(t);var s={resource_parameter:this._dcapiGetAssetUri(t),accept:"asset_uri_download_v1.json",headers:{"x-request-id":n().v4()}};return new Promise((function(t,n){o.dcapiPromise.then((function(){return o._dcapi.call("assets.download_uri",_objectSpread(_objectSpread({},s),{},{uri_parameters:{make_direct_storage_uri:!0}})).then((function(n){o._setDownloadUrlType(q),t(n.content.uri)})).catch((function(){return o._dcapi.call("assets.download_uri",s).then((function(n){o._setDownloadUrlType(z),t(n.content.uri)})).catch((function(t){o._setDownloadUrlType(H),n(t)}))}))}))}))}},{key:"_dcapiGetUserDownloadUri",value:function _dcapiGetUserDownloadUri(t,i){var o=this;return RenditionAPI._isReviewAsset(i)||RenditionAPI._isParcelAsset(i)?this._reviewGetDownloadUri(t,i):this.options.useDCAPI?this._assetRenditions[t]&&this._assetRenditions[t].dcapi&&this._assetRenditions[t].dcapi.userDownloadUri?Promise.resolve(this._assetRenditions[t].dcapi.userDownloadUri):this.dcapiPromise.then((function(){return o._dcapi.call("assets.download_uri",{resource_parameter:o._dcapiGetAssetUri(t),accept:"asset_uri_download_v1.json",headers:{"x-request-id":n().v4()}}).then((function(n){return o._cacheRendition(t,{dcapi:{userDownloadUri:n.content.uri}}),n.content.uri}),(function(t){return Promise.reject(t)}))})):Promise.resolve(t)}},{key:"_dcapiSetLastPageNum",value:function _dcapiSetLastPageNum(t,n){var i=this;return RenditionAPI._isReviewAsset(n)||RenditionAPI._isParcelAsset(n)?Promise.reject(new Error("Cannot set last page number on a review/parcel asset")):this.dcapiPromise.then((function(){return i._dcapi.call("assets.put_metadata_field",{resource_parameter:i._dcapiGetAssetUri(t),content_type:"asset_metadata_field_v1.json",content:{last_pagenum:n.lastPageNum-1},uri_parameters:{fields:"last_pagenum"}})}))}},{key:"_dcapiSetLastAccess",value:function _dcapiSetLastAccess(t,n){var i=this;return RenditionAPI._isReviewAsset(n)||RenditionAPI._isParcelAsset(n)?Promise.reject(new Error("Cannot set last access on a review/parcel asset")):this.dcapiPromise.then((function(){return i._dcapi.call("assets.put_metadata_field",{resource_parameter:i._dcapiGetAssetUri(t),content_type:"asset_metadata_field_v1.json",content:{last_access:""},uri_parameters:{fields:"last_access"}})}))}},{key:"_dcapiGetContentBuffer",value:function _dcapiGetContentBuffer(t,n,i){var o=this;if(!this._assetRenditions[t]||!this._assetRenditions[t].dcapi||!this._assetRenditions[t].dcapi.contentBuffer){var s={responseType:"arraybuffer",withCredentials:this.options.fetchWithCredentials};return!RenditionAPI._isSignAsset(i)&&!this._isS3DownloadUrl&&this._dcapi&&this._dcapi.session&&this._dcapi.session.content&&this._dcapi.session.content.access_token&&(s.headers={Authorization:"Bearer ".concat(this._dcapi.session.content.access_token)}),RenditionAPI._fetchWithCredentials(n,s).then((function(n){var i=n.content;return o._cacheRendition(t,{ajs:{contentBuffer:i,contentFormat:n.headers["x-content-format"]},dcapi:{contentBuffer:i,contentFormat:n.headers["x-content-format"]}}),i}))}return Promise.resolve(this._assetRenditions[t].dcapi.contentBuffer)}},{key:"_dcapiGetUserContentBuffer",value:function _dcapiGetUserContentBuffer(t,n){var i=this;if(!this._assetRenditions[t]||!this._assetRenditions[t].dcapi||!this._assetRenditions[t].dcapi.userContentBuffer){var o={responseType:"arraybuffer",withCredentials:this.options.fetchWithCredentials};return this._dcapi&&this._dcapi.session&&this._dcapi.session.content&&this._dcapi.session.content.access_token&&(o.headers={Authorization:"Bearer ".concat(this._dcapi.session.content.access_token)}),RenditionAPI._fetchWithCredentials(n,o).then((function(n){var o=n.content;return i._cacheRendition(t,{ajs:{userContentBuffer:o},dcapi:{userContentBuffer:o}}),o}))}return Promise.resolve(this._assetRenditions[t].dcapi.userContentBuffer)}},{key:"_pdfnowGetMetadata",value:function _pdfnowGetMetadata(t,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this._assetRenditions[t]&&this._assetRenditions[t].pdfnow&&this._assetRenditions[t].pdfnow.contentData&&!0!==n.forceCacheless?Promise.resolve(this._assetRenditions[t].pdfnow.contentData):(this._pdfnowInitPromise()&&this._pdfnowInit(),new Promise((function(s,c){i.pdfnowApiPromise.then((function(){i._pdfnowDcapi.call("assets.get_metadata",{accept:"asset_metadata_basic_v1.json",resource_parameter:t}).then((function(u){var l=u.content;l.assetMimeType=u.content_type,l.last_pagenum=u.content.last_pagenum||0;var d,f=u.content.page_count;return void 0===f&&(5===o?f=1:d=i._pdfnowGetMetadata(t,n,o+1)),d||(l.numPages=f,i._cacheRendition(t,{pdfnow:{contentData:J(l)}}),d=Promise.resolve(i._assetRenditions[t].pdfnow.contentData)),d.then(s).catch(c)})).catch(c)})).catch(c)})))}},{key:"_pdfnowGetRendition",value:function _pdfnowGetRendition(t,n){var i=this,o=n.size||"3200",s=n.format||"png",c=void 0!==n.pageNum?n.pageNum:1,u="".concat(t,"-").concat(c);if(!0===n.forceCacheless||!this._assetPageRenditions[u]||!this._assetPageRenditions[u].pdfnow||!this._assetPageRenditions[u].pdfnow.pageImgBuffer||this._assetPageRenditions[u].pdfnow.format!==s||this._assetPageRenditions[u].pdfnow.size!==o||this._assetPageRenditions[u].pdfnow.page!==c)return this._pdfnowInitPromise()&&this._pdfnowInit(),new Promise((function(n,u){i.pdfnowApiPromise.then((function(){i._pdfnowDcapi.call("assets.rendition_direct",{accept:"image/*",resource_parameter:t,responseType:"arraybuffer",uri_parameters:{format:s,page:c-1,size:o}}).then((function(u){var l={params:{pageImgBuffer:u.content,mimeType:u.headers["content-type"],pageNum:c}};i._cachePageRendition(t,c,{pdfnow:{pageImgBuffer:u.content,mimeType:u.headers["content-type"],size:o,page:c,format:s}}),n(l)})).catch(u)})).catch(u)}));var l=this._assetPageRenditions[u].pdfnow,d={params:{pageImgBuffer:l.pageImgBuffer,mimeType:l.mimeType,pageNum:l.page}};return Promise.resolve(d)}},{key:"_ajsGetContentData",value:function _ajsGetContentData(t,n){var i=ArrayBuffer.isView(t)?t.buffer:t;(0,h.K)("ajsGetContentData Called",{size:i?i.byteLength:-1});var o=Object.assign({buffer:i,documentId:this._documentId,securityHandler:n.fetchPasswordCallback?new T.Z({fetchPasswordCallback:n.fetchPasswordCallback}):void 0},n);return this._getAjs().openPDF(o).then((function(n){return Object.assign({},n.data,{buffer:t})}))}},{key:"_ajsGetLinearizedContentData",value:function _ajsGetLinearizedContentData(t,n){var i=this;return this._fetchPDFSize(t,n).then((function(o){var s=Object.assign({fetchPDFBufferRanges:function fetchPDFBufferRanges(s){if(1===s.length&&0===s[0].start&&void 0===s[0].end)return i._fetchCompletePDFBufferPromise.then((function(t){return[t]}));var c=function getBufferRangesFromCompleteBuffer(){return i._fetchCompletePDFBufferPromise.then((function(t){return s.map((function(n){return t.slice(n.start,Math.min(n.end+1,t.byteLength))}))}))},u=.75*o;return s.some((function(t){return t.end-t.start>u}))?c():i._fetchPDFBufferRanges(t,n,s).catch((function(){return c()}))},pdfSize:o,documentId:i._documentId},n);return i._getAjs().openLinearizedPDF(s).then((function(t){return Object.assign({},t.data)}))})).catch((function(){return i._fetchPDFBufferRanges(t,n,[{start:0}]).then((function(t){return i._ajsGetContentData(t[0],n)}))}))}},{key:"_ajsGetRenditionForPage",value:function _ajsGetRenditionForPage(t,n){var i=Object.assign({devicePixelRatio:1},n),o=i.requestType;"page"===o?o=G.PAGE:"cache"===o?o=G.PAGE_CACHE:"thumbnail"===o&&(o=G.THUMBNAIL),i.requestType=o;var s=i.priority,c=i.viewState;return this._getAjs().getPageRendition(i,c,s).then((function(t){var n=Object.assign({},t),i=n.data,o=i.buffer,s=_objectWithoutProperties(i,M);return n.params=_objectSpread({pageImgBuffer:o},s),delete n.data,n}))}},{key:"_downloadUserAssetContentBuffer",value:function _downloadUserAssetContentBuffer(t,n){var i=this,o=n||{};return this._dcapiGetUserDownloadUri(t,o).then((function(n){return i._dcapiGetUserContentBuffer(t,n).then((function(t){return t}))}))}},{key:"_ajsPerformCommand",value:function _ajsPerformCommand(t,n){var i=n.commandName;if("forceSwitchJS"===i)return this._resetReviewProvider(),this._getAjs().loadFullWorker();if("resetWorker"===i)return this._assetRenditions[t]&&this._assetRenditions[t].ajs&&delete this._assetRenditions[t].ajs,this._assetRenditions[t]&&this._assetRenditions[t].dcapi&&(delete this._assetRenditions[t].dcapi.contentData,delete this._assetRenditions[t].dcapi.contentBuffer,delete this._assetRenditions[t].dcapi.contentFormat),this._assetRenditions[t]&&this._assetRenditions[t].external&&(delete this._assetRenditions[t].external.contentBuffer,delete this._assetRenditions[t].external.metadata),this.closeRendition(t,_objectSpread(_objectSpread({},n),{},{cancelPromises:!0})),this._resetReviewProvider(),this._getAjs().terminate(),this._resetAjsPerfTimings(),this._ajsSetup(),Promise.resolve();if("getPerfTimings"===i)return Promise.resolve(this._perfTimings);if("translateToLiquidModeView"===i)return this._getAjs().translateToLiquidModeView({fetchCNFTPDFUpdatesCallback:C});if(this._getAjs()[i]){var o=n.priority,s=n.viewState,c=_objectWithoutProperties(n,x);return this._getAjs()[i](c,s,o)}return(0,h.K)("Unknown AJS Command",{commandName:i}),Promise.reject(new Error("Unknown AJS command"))}},{key:"_dcapiPerformCommand",value:function _dcapiPerformCommand(t,n){var i=this;return this.dcapiPromise.then((function(){return new Promise((function(o,s){"setLastPageNum"===n.commandName?i._dcapiSetLastPageNum(t,n).then(o).catch(s):"setLastAccess"===n.commandName?i._dcapiSetLastAccess(t,n).then(o).catch(s):"getContentBuffer"===n.commandName?i.downloadAssetContentBuffer(t,n).then(o).catch(s):"getUserContentBuffer"===n.commandName?i._downloadUserAssetContentBuffer(t,n).then(o).catch(s):s()}))}))}},{key:"_externalPerformCommand",value:function _externalPerformCommand(t,n){var i=this;return new Promise((function(o,s){"setLastPageNum"===n.commandName?o():"getContentBuffer"===n.commandName?i.downloadAssetContentBuffer(t,n).then(o).catch(s):"setLastAccess"===n.commandName||"getUserContentBuffer"===n.commandName?o():s()}))}},{key:"ready",value:function ready(){return Promise.resolve(this)}},{key:"performCommandSynchronously",value:function performCommandSynchronously(t,n){var i=n.commandName;if(this.ajs[i]){var o=n.priority,s=n.viewState,c=_objectWithoutProperties(n,L);return this.ajs[i](c,s,o)}return Promise.reject(new Error("Unknown AJS command"))}},{key:"performCommand",value:function performCommand(t,n){var i={},o=n||{};return o.useDCAPI=!1!==o.useDCAPI&&this.options.useDCAPI,o.useAJS=!1!==o.useAJS&&this.options.useAJS,o.enableExternal=!1!==o.enableExternal&&this.options.enableExternal,o.useAJS?i.ajs=this._ajsPerformCommand(t,o):i.ajs=Promise.reject(new Error("Cannot perform AJS command if AJS is disabled")),o.useDCAPI?i.dcapi=this._dcapiPerformCommand(t,o):i.dcapi=Promise.reject(new Error("Cannot perform DCAPI command if DCAPI is disabled")),o.enableExternal&&RenditionAPI._isExternalAsset(o)&&(i.external=this._externalPerformCommand(t,o)),i}},{key:"isCompletePDFBufferAvailable",value:function isCompletePDFBufferAvailable(){return this._completePDFBufferAvailablePromise}},{key:"getMetadata",value:function getMetadata(t,n){var i={},o=n||{};return o.useDCAPI=!1!==o.useDCAPI&&this.options.useDCAPI,o.useAJS=!1!==o.useAJS&&this.options.useAJS,o.enableExternal=!1!==o.enableExternal&&this.options.enableExternal,this.options.shouldUseModernViewer=o.shouldUseModernViewer,o.useDCAPI?i.dcapi=this._dcapiGetMetadata(t,o):i.dcapi=Promise.reject(new Error("Cannot get DCAPI metadata if DCAPI is disabled")),o.enableExternal&&RenditionAPI._isExternalAsset(o)&&(i.external=this._externalGetMetadata(t,o)),o.useAJS?i.ajs=this._ajsGetMetadata(t,o):i.ajs=Promise.reject(new Error("Cannot get AJS metadata if AJS is disabled")),i}},{key:"_ajsRegisterLicense",value:function _ajsRegisterLicense(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={token:t.licenseString,domain:t.domain};return this._getAjs().registerLicense(n)}},{key:"registerLicense",value:function registerLicense(t){var n={},i=t||{};return i.useDCAPI=!1!==i.useDCAPI&&this.options.useDCAPI,i.useAJS=!1!==i.useAJS&&this.options.useAJS,n.dcapi=Promise.reject(new Error("DCAPI doesn't support sdk license validation")),i.useAJS?n.ajs=this._ajsRegisterLicense(i):n.ajs=Promise.reject(new Error("Cannot register license if AJS is disabled")),n}},{key:"getRendition",value:function getRendition(t,n){var i={},o=n||{};return o.useDCAPI=!1!==o.useDCAPI&&this.options.useDCAPI,o.useAJS=!1!==o.useAJS&&this.options.useAJS,o.enableExternal=!1!==o.enableExternal&&this.options.enableExternal,o.useDCAPI?i.dcapi=this._dcapiGetRendition(t,o):i.dcapi=Promise.reject(new Error("Cannot get DCAPI rendition if DCAPI is disabled")),o.enableExternal&&RenditionAPI._isExternalAsset(o)&&(i.external=this._externalGetRendition(t,o)),o.useAJS?i.ajs=this._ajsGetRenditionForPage(t,o):i.ajs=Promise.reject(new Error("Cannot get AJS rendition if AJS is disabled")),i}},{key:"getDocumentRenditionUri",value:function getDocumentRenditionUri(t,n){var i={},o=n||{};return o.useDCAPI=!1!==o.useDCAPI&&this.options.useDCAPI,o.useAJS=!1!==o.useAJS&&this.options.useAJS,o.useDCAPI?i.dcapi=this._dcapiGetDocumentRenditionUri(t,o):i.dcapi=Promise.reject(new Error("Cannot get DCAPI doc rendition URI if DCAPI is disabled")),i.ajs=Promise.reject(new Error("Cannot get AJS doc rendition URI")),i}},{key:"getDocumentRendition",value:function getDocumentRendition(t,n){var i={},o=n||{};return o.useDCAPI=!1!==o.useDCAPI&&this.options.useDCAPI,o.useAJS=!1!==o.useAJS&&this.options.useAJS,o.useDCAPI?i.dcapi=this._dcapiGetDocumentRendition(t,o):i.dcapi=Promise.reject(new Error("Cannot get DCAPI doc rendition if DCAPI is disabled")),i.ajs=Promise.reject(new Error("Cannot get AJS doc rendition")),i}},{key:"getDocumentRenditionStatus",value:function getDocumentRenditionStatus(t,n){var i={},o=n||{};return o.useDCAPI=!1!==o.useDCAPI&&this.options.useDCAPI,o.useAJS=!1!==o.useAJS&&this.options.useAJS,o.useDCAPI?i.dcapi=this._dcapiGetDocumentRenditionStatus(t):i.dcapi=Promise.reject(new Error("Cannot get DCAPI doc rendition status if DCAPI is disabled")),i.ajs=Promise.reject(new Error("Cannot get DCAPI doc rendition status")),i}},{key:"downloadAssetContentBuffer",value:function downloadAssetContentBuffer(t,n){var i=this;return n&&RenditionAPI._isExternalAsset(n)?this._externalGetDownloadUri(t,n).then((function(n){return i._externalGetContentBuffer(t,n).then((function(t){return t}))})):this._assetRenditions[t]&&this._assetRenditions[t].dcapi&&this._assetRenditions[t].dcapi.contentBuffer?Promise.resolve(this._assetRenditions[t].dcapi.contentBuffer):this._dcapiGetDownloadUri(t,n).then((function(o){return i._dcapiGetContentBuffer(t,o,n).then((function(t){return t}))}))}},{key:"closeRendition",value:function closeRendition(t,n){var i={dcapi:Promise.resolve(),ajs:Promise.resolve()},o=n||{};o.useDCAPI=!1!==o.useDCAPI&&this.options.useDCAPI,this._assetRenditions[t]&&o.clearCache&&(delete this._assetRenditions[t],this._assetRenditionsIndex=this._assetRenditionsIndex.filter((function(n){return n!==t}))),o.clearCache&&(this._assetPageRenditions=Object.entries(this._assetPageRenditions).reduce((function(n,i){var o=_slicedToArray(i,2),s=o[0],c=o[1];return s.startsWith(t)||(n[s]=c),n}),{}),this._assetPageRenditionsIndex=Object.keys(this._assetPageRenditions)),o.useDCAPI&&void 0!==o.lastPageNum&&(i.dcapi=this._dcapiSetLastPageNum(t,o)),o.cancelPromises&&function cancelAllPromises(){_.forEach((function(t){t.cancel()})),_=[]}()}},{key:"getOwnScriptSrc",value:function getOwnScriptSrc(){return A.ZQ(S.X)}},{key:"getAJSWorker",value:function getAJSWorker(){}}],[{key:"_ajsGetPath",value:function _ajsGetPath(){return A.lO()}},{key:"_getOriginFromUrl",value:function _getOriginFromUrl(t){return A.ir(t)}},{key:"_dcapiGetAssetUrn",value:function _dcapiGetAssetUrn(t){return t.startsWith("urn:")?t:t.substr(t.lastIndexOf("/")+1)}},{key:"_isReviewAsset",value:function _isReviewAsset(t){return"/review"===t.assetType}},{key:"_isParcelAsset",value:function _isParcelAsset(t){return"/parcel"===t.assetType}},{key:"_isExternalAsset",value:function _isExternalAsset(t){return"/external"===t.assetType}},{key:"_isConnectorAsset",value:function _isConnectorAsset(t){return t.assetType&&B.includes(t.assetType)}},{key:"_isSignAsset",value:function _isSignAsset(t){return"/sign"===t.assetType}},{key:"_isPDFNowAsset",value:function _isPDFNowAsset(t){return"/pdfnow"===t.assetType}},{key:"_fetchWithCredentials",value:function _fetchWithCredentials(t,n){var i,o,s=n||{};(o=s.timeout)>=0||(o=u().http.timeout);var c=new Promise((function(n,c){try{(i=new XMLHttpRequest).open("GET",t,!0),o>=0&&(i.timeout=o),s.responseType&&(i.responseType=s.responseType),s.headers&&Object.entries(s.headers).some((function(t){var n=_slicedToArray(t,2),o=n[0],s=n[1];return i.setRequestHeader(o,s)})),s.withCredentials&&(i.withCredentials=s.withCredentials),i.onreadystatechange=function(){if(s.response_content_open){if(!i.readyState||i.readyState<2)return}else if(4!==i.readyState)return;var t;try{if(t={status:i.status,statusText:i.statusText||i.status,headers:u().http.parseHeaders(i.getAllResponseHeaders()),content:void 0},s.response_content_open||(i.responseType&&"text"!==i.responseType?t.content=i.response:t.content=i.responseText),!(i.status>0&&i.status<400))throw 0!==i.status||t.statusText||(t.statusText="Timeout or network error"),new(u().AdobeError)(t.statusText,t.status,t);n(t)}catch(n){!n||n instanceof Error?c(n):c(new(u().AdobeError)(n.stack||n,t.status,t))}},s.request_content_open||i.send(undefined)}catch(n){c(new(u().AdobeError)(n.stack||n,0,{method:"GET",url:t,options:s}))}}));return(s.request_content_open||s.response_content_open)&&(c.request=i),c}}]),RenditionAPI}();var Q={rendition:{load:function renditionLoad(){return Promise.resolve(X)}},"font-provider":{load:function loadFontProvider(t){return __webpack_require__.p=t,__webpack_require__.e(611).then(__webpack_require__.bind(__webpack_require__,"DmhC")).then((function(t){return t.default}))}},acrobatjs:{load:function loadAJSProvider(t){return __webpack_require__.p=t,__webpack_require__.e(90).then(__webpack_require__.bind(__webpack_require__,"+OJK")).then((function(t){return t.default}))}}};X.getInstance=(0,p.getSingletonFunction)(X,!0),f.providers.rendition=X.getInstance})(),((window.adobe_dc_sdk=window.adobe_dc_sdk||{}).components=window.adobe_dc_sdk.components||{}).rendition=s})();
//# sourceMappingURL=private/rendition.js.map